+ [author](http://nsddd.top)

# ç¬¬15èŠ‚ curlå‘½ä»¤

<div><a href = '14.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '16.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•linuxå¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤è¡¥å……ï¼Œç½‘ç»œçŸ¥è¯†çš„è¡¥å……ï¼ŒLinuxç½‘ç»œç¼–ç¨‹åŸºç¡€ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## ç®€ä»‹

::: tip
curl æ˜¯å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥è¯·æ±‚ Web æœåŠ¡å™¨ã€‚å®ƒçš„åå­—å°±æ˜¯å®¢æˆ·ç«¯ï¼ˆclientï¼‰çš„ URL å·¥å…·çš„æ„æ€ã€‚

[curl](https://curl.haxx.se/)æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œç”¨æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨"æ ‡å‡†è¾“å‡º"ï¼ˆstdoutï¼‰ä¸Šé¢ã€‚

å®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå‘½ä»¤è¡Œå‚æ•°å¤šè¾¾å‡ åç§ã€‚å¦‚æœç†Ÿç»ƒçš„è¯ï¼Œå®Œå…¨å¯ä»¥å–ä»£ Postman è¿™ä¸€ç±»çš„å›¾å½¢ç•Œé¢å·¥å…·ã€‚
:::



## æŸ¥çœ‹ç½‘é¡µæºç 

ç›´æ¥åœ¨curlå‘½ä»¤ååŠ ä¸Šç½‘å€ï¼Œå°±å¯ä»¥çœ‹åˆ°ç½‘é¡µæºç ã€‚

```bash
[user1@VM-4-6-centos ~]$ curl www.alibaba.com
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>
<head><title>301 Moved Permanently</title></head>
<body>
<center><h1>301 Moved Permanently</h1></center>
<hr/>Powered by Tengine<hr><center>tengine</center>
</body>
</html>
```



å¦‚æœè¦æŠŠè¿™ä¸ªç½‘é¡µä¿å­˜ä¸‹æ¥ï¼Œå¯ä»¥ä½¿ç”¨`-o`å‚æ•°ï¼Œè¿™å°±ç›¸å½“äºä½¿ç”¨wgetå‘½ä»¤äº†ã€‚

```bash
curl -o é˜¿é‡Œå·´å·´ www.alibaba.com
```

![image-20221108160624808](http://sm.nsddd.top/smimage-20221108160624808.png)



## è‡ªåŠ¨è·³è½¬

æœ‰çš„ç½‘å€æ˜¯è‡ªåŠ¨è·³è½¬çš„ã€‚ä½¿ç”¨`-L`å‚æ•°ï¼Œcurlå°±ä¼šè·³è½¬åˆ°æ–°çš„ç½‘å€ã€‚

```bash
curl -L é˜¿é‡Œå·´å·´ www.alibaba.com
```



## æ˜¾ç¤ºå¤´ä¿¡æ¯

`-i`å‚æ•°å¯ä»¥æ˜¾ç¤ºhttp responseçš„å¤´ä¿¡æ¯ï¼Œè¿åŒç½‘é¡µä»£ç ä¸€èµ·ã€‚

::: details å±•å¼€
ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```bash
[user1@VM-4-6-centos ~]$ curl -i www.alibaba.com
HTTP/1.1 301 Moved Permanently
Server: Tengine
Date: Tue, 08 Nov 2022 08:09:59 GMT
Content-Type: text/html
Content-Length: 239
Connection: keep-alive
Location: https://www.alibaba.com/
Timing-Allow-Origin: *
EagleId: 2132e62216678949993093993e57ff
server-timing: rt;dur=0.000,eagleid;desc=2132e62216678949993093993e57ff

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>
<head><title>301 Moved Permanently</title></head>
<body>
<center><h1>301 Moved Permanently</h1></center>
<hr/>Powered by Tengine<hr><center>tengine</center>
</body>
</html>
```

:::



`-I`å‚æ•°åˆ™æ˜¯åªæ˜¾ç¤ºhttp responseçš„å¤´ä¿¡æ¯ã€‚

```bash
[user1@VM-4-6-centos ~]$ curl -I www.alibaba.com
HTTP/1.1 301 Moved Permanently
Server: Tengine
Date: Tue, 08 Nov 2022 08:10:28 GMT
Content-Type: text/html
Content-Length: 239
Connection: keep-alive
Location: https://www.alibaba.com/
Timing-Allow-Origin: *
EagleId: 2132e63316678950285291581eb870
server-timing: rt;dur=0.000,eagleid;desc=2132e63316678950285291581eb870
```



## æ˜¾ç¤ºé€šä¿¡è¿‡ç¨‹

`-v`å‚æ•°å¯ä»¥æ˜¾ç¤ºä¸€æ¬¡httpé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç«¯å£è¿æ¥å’Œhttp requestå¤´ä¿¡æ¯ã€‚

```bash
curl -v www.alibaba.com
```

::: details å±•å¼€
ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```
[user1@VM-4-6-centos ~]$ curl -v www.alibaba.com
* About to connect() to www.alibaba.com port 80 (#0)
*   Trying 203.119.129.109...
* Connected to www.alibaba.com (203.119.129.109) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.29.0
> Host: www.alibaba.com
> Accept: */*
> 
< HTTP/1.1 301 Moved Permanently
< Server: Tengine
< Date: Tue, 08 Nov 2022 08:11:07 GMT
< Content-Type: text/html
< Content-Length: 239
< Connection: keep-alive
< Location: https://www.alibaba.com/
< Timing-Allow-Origin: *
< EagleId: 212b0b8916678950672353342e2561
< server-timing: rt;dur=0.000,eagleid;desc=212b0b8916678950672353342e2561
< 
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>
<head><title>301 Moved Permanently</title></head>
<body>
<center><h1>301 Moved Permanently</h1></center>
<hr/>Powered by Tengine<hr><center>tengine</center>
</body>
</html>
* Connection #0 to host www.alibaba.com left intact
```

:::



å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„ä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œé‚£ä¹ˆä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„é€šä¿¡è¿‡ç¨‹ã€‚

```bash
curl --trace output.txt  www.alibaba.com
```

è¿è¡Œåï¼Œè¯·æ‰“å¼€ `output.txt` æ–‡ä»¶æŸ¥çœ‹ã€‚



::: details æŸ¥çœ‹ output.txt æ–‡ä»¶
å±•å¼€æŸ¥çœ‹ï¼š

```bash
[user1@VM-4-6-centos ~]$ head -n 10  output.txt; tail -n 10 output.txt 
== Info: About to connect() to www.alibaba.com port 80 (#0)
== Info:   Trying 203.119.129.109...
== Info: Connected to www.alibaba.com (203.119.129.109) port 80 (#0)
=> Send header, 79 bytes (0x4f)
0000: 47 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0d 0a GET / HTTP/1.1..
0010: 55 73 65 72 2d 41 67 65 6e 74 3a 20 63 75 72 6c User-Agent: curl
0020: 2f 37 2e 32 39 2e 30 0d 0a 48 6f 73 74 3a 20 77 /7.29.0..Host: w
0030: 77 77 2e 61 6c 69 62 61 62 61 2e 63 6f 6d 0d 0a ww.alibaba.com..
0040: 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 0d 0a    Accept: */*....
<= Recv header, 32 bytes (0x20)
0060: 74 69 74 6c 65 3e 3c 2f 68 65 61 64 3e 0d 0a 3c title></head>..<
0070: 62 6f 64 79 3e 0d 0a 3c 63 65 6e 74 65 72 3e 3c body>..<center><
0080: 68 31 3e 33 30 31 20 4d 6f 76 65 64 20 50 65 72 h1>301 Moved Per
0090: 6d 61 6e 65 6e 74 6c 79 3c 2f 68 31 3e 3c 2f 63 manently</h1></c
00a0: 65 6e 74 65 72 3e 0d 0a 3c 68 72 2f 3e 50 6f 77 enter>..<hr/>Pow
00b0: 65 72 65 64 20 62 79 20 54 65 6e 67 69 6e 65 3c ered by Tengine<
00c0: 68 72 3e 3c 63 65 6e 74 65 72 3e 74 65 6e 67 69 hr><center>tengi
00d0: 6e 65 3c 2f 63 65 6e 74 65 72 3e 0d 0a 3c 2f 62 ne</center>..</b
00e0: 6f 64 79 3e 0d 0a 3c 2f 68 74 6d 6c 3e 0d 0a    ody>..</html>..
== Info: Connection #0 to host www.alibaba.com left intact
```

:::



## å‘é€è¡¨å•ä¿¡æ¯

å‘é€è¡¨å•ä¿¡æ¯æœ‰GETå’ŒPOSTä¸¤ç§æ–¹æ³•ã€‚GETæ–¹æ³•ç›¸å¯¹ç®€å•ï¼Œåªè¦æŠŠæ•°æ®é™„åœ¨ç½‘å€åé¢å°±è¡Œã€‚

```bash
curl nsddd.top?data=123
```

::: details ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```bash
[user1@VM-4-6-centos ~]$ curl -v  example.com/form.cgi?data=12314234131 
* About to connect() to example.com port 80 (#0)
*   Trying 93.184.216.34...
* Connected to example.com (93.184.216.34) port 80 (#0)
> GET /form.cgi?data=12314234131 HTTP/1.1
> User-Agent: curl/7.29.0
> Host: example.com
> Accept: */*
> 
< HTTP/1.1 404 Not Found
< Accept-Ranges: bytes
< Age: 47
< Cache-Control: max-age=604800
< Content-Type: text/html; charset=UTF-8
< Date: Tue, 08 Nov 2022 08:20:01 GMT
< Expires: Tue, 15 Nov 2022 08:20:01 GMT
< Last-Modified: Tue, 08 Nov 2022 08:19:14 GMT
< Server: ECS (sab/5709)
< Vary: Accept-Encoding
< X-Cache: 404-HIT
< Content-Length: 1256
< 
<!doctype html>
<html>
<head>
    <title>Example Domain</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">
    body {
        background-color: #f0f0f2;
        margin: 0;
        padding: 0;
        font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
        
    }
    div {
        width: 600px;
        margin: 5em auto;
        padding: 2em;
        background-color: #fdfdff;
        border-radius: 0.5em;
        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);
    }
    a:link, a:visited {
        color: #38488f;
        text-decoration: none;
    }
    @media (max-width: 700px) {
        div {
            margin: 0 auto;
            width: auto;
        }
    }
    </style>    
</head>

<body>
<div>
    <h1>Example Domain</h1>
    <p>This domain is for use in illustrative examples in documents. You may use this
    domain in literature without prior coordination or asking for permission.</p>
    <p><a href="https://www.iana.org/domains/example">More information...</a></p>
</div>
</body>
</html>
* Connection #0 to host example.com left intact

```

:::



POSTæ–¹æ³•å¿…é¡»æŠŠæ•°æ®å’Œç½‘å€åˆ†å¼€ï¼Œcurlå°±è¦ç”¨åˆ° `--data` å‚æ•°ã€‚

```bash
curl -v -X  POST --data "data=23122134124"  
```

::: details ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```bash
[user1@VM-4-6-centos ~]$ curl -v -X  POST --data "data=23122134124"  example.com/form.cgi?
* About to connect() to example.com port 80 (#0)
*   Trying 93.184.216.34...
* Connected to example.com (93.184.216.34) port 80 (#0)
> POST /form.cgi? HTTP/1.1
> User-Agent: curl/7.29.0
> Host: example.com
> Accept: */*
> Content-Length: 16
> Content-Type: application/x-www-form-urlencoded
> 
* upload completely sent off: 16 out of 16 bytes
< HTTP/1.1 404 Not Found
< Cache-Control: max-age=604800
< Content-Type: text/html; charset=UTF-8
< Date: Tue, 08 Nov 2022 08:21:57 GMT
< Expires: Tue, 15 Nov 2022 08:21:57 GMT
< Server: EOS (vny/0451)
< Content-Length: 445
< 
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>404 - Not Found</title>
	</head>
	<body>
		<h1>404 - Not Found</h1>
		<script type="text/javascript" src="//wpc.75674.betacdn.net/0075674/www/ec_tpm_bcon.js"></script>
	</body>
</html>
* Connection #0 to host example.com left intact

```

:::



å¦‚æœä½ çš„æ•°æ®æ²¡æœ‰ç»è¿‡è¡¨å•ç¼–ç ï¼Œè¿˜å¯ä»¥è®©curlä¸ºä½ ç¼–ç ï¼Œå‚æ•°æ˜¯`--data-urlencode`ã€‚

```bash
curl -X POST--data-urlencode "date=April 1" example.com/form.cgi
```





## HTTPåŠ¨è¯

curlé»˜è®¤çš„HTTPåŠ¨è¯æ˜¯GETï¼Œä½¿ç”¨`-X`å‚æ•°å¯ä»¥æ”¯æŒå…¶ä»–åŠ¨è¯ã€‚

```bash
curl -X POST www.example.com
```

**åˆ é™¤ï¼š**

```
curl -X DELETE www.example.com
```

**æ›´æ–°ï¼š**

```
curl -X UPDATE www.example.com
```



## æ–‡ä»¶ä¸Šä¼ 

å‡å®šæ–‡ä»¶ä¸Šä¼ çš„è¡¨å•æ˜¯ä¸‹é¢è¿™æ ·ï¼š



## Refererå­—æ®µ

æœ‰æ—¶ä½ éœ€è¦åœ¨http requestå¤´ä¿¡æ¯ä¸­ï¼Œæä¾›ä¸€ä¸ªrefererå­—æ®µï¼Œè¡¨ç¤ºä½ æ˜¯ä»å“ªé‡Œè·³è½¬è¿‡æ¥çš„ã€‚

```bash
curl --referer http://www.example.com http://www.example.com
```



## cookie

ä½¿ç”¨`--cookie`å‚æ•°ï¼Œå¯ä»¥è®©curlå‘é€cookieã€‚

```bash
curl --cookie "name=xxx" www.example.com
```

è‡³äºå…·ä½“çš„cookieçš„å€¼ï¼Œå¯ä»¥ä»http responseå¤´ä¿¡æ¯çš„`Set-Cookie`å­—æ®µä¸­å¾—åˆ°ã€‚

`-c cookie-file`å¯ä»¥ä¿å­˜æœåŠ¡å™¨è¿”å›çš„cookieåˆ°æ–‡ä»¶ï¼Œ`-b cookie-file`å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ä½œä¸ºcookieä¿¡æ¯ï¼Œè¿›è¡Œåç»­çš„è¯·æ±‚ã€‚

```bash
curl -c cookies http://example.com
curl -b cookies http://example.com
```



## å‚æ•°ç³»åˆ—

### -A

`-A`å‚æ•°æŒ‡å®šå®¢æˆ·ç«¯çš„ç”¨æˆ·ä»£ç†æ ‡å¤´ï¼Œå³`User-Agent`ã€‚curl çš„é»˜è®¤ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²æ˜¯`curl/[version]`ã€‚

```bash
curl -A 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' https://baidu.com
```



### -B

`-b`å‚æ•°ç”¨æ¥å‘æœåŠ¡å™¨å‘é€ Cookieã€‚



### -c

`-c`å‚æ•°å°†æœåŠ¡å™¨è®¾ç½®çš„ Cookie å†™å…¥ä¸€ä¸ªæ–‡ä»¶ã€‚

```bash
curl -c cookies.txt https://www.google.com
```

> ä¸Šé¢å‘½ä»¤å°†æœåŠ¡å™¨çš„ HTTP å›åº”æ‰€è®¾ç½® Cookie å†™å…¥æ–‡æœ¬æ–‡ä»¶`cookies.txt`ã€‚



### -d

`-d`å‚æ•°ç”¨äºå‘é€ POST è¯·æ±‚çš„æ•°æ®ä½“ã€‚

```bash
$ curl -d'login=emmaï¼†password=123'-X POST https://google.com/login
# æˆ–è€…
$ curl -d 'login=emma' -d 'password=123' -X POST  https://google.com/login
```

ä½¿ç”¨`-d`å‚æ•°ä»¥åï¼ŒHTTP è¯·æ±‚ä¼šè‡ªåŠ¨åŠ ä¸Šæ ‡å¤´`Content-Type : application/x-www-form-urlencoded`ã€‚å¹¶ä¸”ä¼šè‡ªåŠ¨å°†è¯·æ±‚è½¬ä¸º POST æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥çœç•¥`-X POST`ã€‚



### -k

`-k`å‚æ•°æŒ‡å®šè·³è¿‡ SSL æ£€æµ‹ã€‚



### -L

`-L`å‚æ•°ä¼šè®© HTTP è¯·æ±‚è·ŸéšæœåŠ¡å™¨çš„é‡å®šå‘ã€‚curl é»˜è®¤ä¸è·Ÿéšé‡å®šå‘ã€‚



### --limit-rate

`--limit-rate`ç”¨æ¥é™åˆ¶ HTTP è¯·æ±‚å’Œå›åº”çš„å¸¦å®½ï¼Œæ¨¡æ‹Ÿæ…¢ç½‘é€Ÿçš„ç¯å¢ƒã€‚

```bash
curl --limit-rate 200k https://google.com
```

> ä¸Šé¢å‘½ä»¤å°†å¸¦å®½é™åˆ¶åœ¨æ¯ç§’ 200K å­—èŠ‚ã€‚



### -o

`-o`å‚æ•°å°†æœåŠ¡å™¨çš„å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œç­‰åŒäº`wget`å‘½ä»¤ã€‚

```bash
curl -o example.html https://www.example.com
```



### -O

`-O`å‚æ•°å°†æœåŠ¡å™¨å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œå¹¶å°† URL çš„æœ€åéƒ¨åˆ†å½“ä½œæ–‡ä»¶åã€‚



### -s

`-s`å‚æ•°å°†ä¸è¾“å‡ºé”™è¯¯å’Œè¿›åº¦ä¿¡æ¯ã€‚

å¦‚æœæƒ³è®© curl ä¸äº§ç”Ÿä»»ä½•è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚

```bash
 curl -s -o /dev/null https://google.com
```



### -S

`-S`å‚æ•°æŒ‡å®šåªè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œé€šå¸¸ä¸`-s`ä¸€èµ·ä½¿ç”¨ã€‚

```bash
curl -Ss -o /dev/null https://google.com
```

ä¸Šé¢å‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œé™¤éå‘ç”Ÿé”™è¯¯ã€‚



### -u

`-u`å‚æ•°ç”¨æ¥è®¾ç½®æœåŠ¡å™¨è®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

ä¸Šé¢å‘½ä»¤è®¾ç½®ç”¨æˆ·åä¸º`bob`ï¼Œå¯†ç ä¸º`12345`ï¼Œç„¶åå°†å…¶è½¬ä¸º HTTP æ ‡å¤´`Authorization: Basic Ym9iOjEyMzQ1`ã€‚



### -v

`-v`å‚æ•°è¾“å‡ºé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨äºè°ƒè¯•ã€‚





## END é“¾æ¥

<ul><li><div><a href = '14.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '16.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

