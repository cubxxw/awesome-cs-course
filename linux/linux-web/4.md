+ [author](http://nsddd.top)

# ç¬¬4èŠ‚ netstatç½‘ç»œç«¯å£æŸ¥çœ‹

<div><a href = '3.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '5.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•linuxå¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤è¡¥å……ï¼Œç½‘ç»œçŸ¥è¯†çš„è¡¥å……ï¼ŒLinuxç½‘ç»œç¼–ç¨‹åŸºç¡€ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## netstatå‘½ä»¤

ç»å¸¸ç”¨åˆ°çš„æ˜¯netstatå‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦çœ‹å¯¹åº”çš„ç«¯å£å’Œè¿›ç¨‹ï¼Œç»å¸¸éœ€è¦å»åˆ¤æ–­ç«¯å£å’Œè¿›ç¨‹æ˜¯å¦æ­£å¸¸ã€‚

```bash
root@ubuntu:~# netstat --help
usage: netstat [-vWeenNcCF] [<Af>] -r         netstat {-V|--version|-h|--help}
       netstat [-vWnNcaeol] [<Socket> ...]
       netstat { [-vWeenNac] -i | [-cnNe] -M | -s [-6tuw] }

        -r, --route              display routing table
        -i, --interfaces         display interface table
        -g, --groups             display multicast group memberships
        -s, --statistics         display networking statistics (like SNMP)
        -M, --masquerade         display masqueraded connections

        -v, --verbose            be verbose
        -W, --wide               don't truncate IP addresses
        -n, --numeric            don't resolve names
        --numeric-hosts          don't resolve host names
        --numeric-ports          don't resolve port names
        --numeric-users          don't resolve user names
        -N, --symbolic           resolve hardware names
        -e, --extend             display other/more information
        -p, --programs           display PID/Program name for sockets
        -o, --timers             display timers
        -c, --continuous         continuous listing

        -l, --listening          display listening server sockets
        -a, --all                display all sockets (default: connected)
        -F, --fib                display Forwarding Information Base (default)
        -C, --cache              display routing cache instead of FIB
        -Z, --context            display SELinux security context for sockets

  <Socket>={-t|--tcp} {-u|--udp} {-U|--udplite} {-S|--sctp} {-w|--raw}
           {-x|--unix} --ax25 --ipx --netrom
  <AF>=Use '-6|-4' or '-A <af>' or '--<af>'; default: inet
  List of possible address families (which support routing):
    inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25) 
    netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP) 
    x25 (CCITT X.25) 
```



## æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥æƒ…å†µ

+ aï¼š allæ˜¾ç¤ºæ‰€æœ‰å¥—æ¥å­—ï¼ˆsocketï¼‰ä¿¡æ¯
+ nï¼šæ˜¾ç¤ºæ•°å­—åœ°å€ä¿¡æ¯è€Œéä¸»æœºå

```
netstat -an
```

**ä¸€èˆ¬æ¥è¯´å’Œç®¡é“ä¸€èµ·ç”¨ï¼Œå› ä¸ºæ•°æ®å¤ªå¤šäº†ä¸å¥½æ‰¾**



æˆ‘ä»¬ä½¿ç”¨nginxï¼Œæé†’æˆ‘ä»¬`80`ç«¯å£è¢«å ç”¨

```
root@ubuntu:~# nginx
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 127.0.0.1:81 failed (98: Address already in use)
```



**æŸ¥çœ‹80ç«¯å£å ç”¨æƒ…å†µ**

```
netstat -an | grep 80
```

![image-20220923115944147](https://sm.nsddd.top//typora/image-20220923115944147.png?mail:3293172751@qq.com)



**æµè§ˆå™¨è®¿é—®`80`ç«¯å£**

![image-20220923120120354](https://sm.nsddd.top//typora/image-20220923120120354.png?mail:3293172751@qq.com)



### æ€æ­»ç«¯å£

**æˆ‘ä»¬è¦å…ˆæ˜¾ç¤ºæ‰€æœ‰ç«¯å£çš„ä¿¡æ¯ï¼Œç­›é€‰å‡ºè‡ªå·±éœ€è¦çš„ç«¯å£**

+ åé¢çš„åˆ†åˆ«è¡¨ç¤ºä¸º`è¿›ç¨‹IDï¼šè¿›ç¨‹å`
+ `-t`è¡¨ç¤ºTCP
+ `-u`è¡¨ç¤ºUDP
+ `-l`è¡¨ç¤ºæ­£åœ¨ç›‘å¬

```
netstat -tunlp | grep 80	
```

![image-20220923134046539](https://sm.nsddd.top//typora/image-20220923134046539.png?mail:3293172751@qq.com)

```
pkill -9 httpd
```



### æœ¬åœ°å›ç¯åœ°å€å’Œæ‰€æœ‰çš„ç½‘å¡åœ°å€

æœ¬åœ°å›ç¯åœ°å€ï¼š

> ç”¨äºæœºå™¨çš„å†…éƒ¨é€šä¿¡ï¼Œç”±äºæœºå™¨å†…éƒ¨å¼•ç”¨é€šä¿¡ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®åœ°å€ï¼Œæ¯ä¸ªæœºå™¨éƒ½æœ‰è‡ªå·±çš„127.0.0.1

```
127.0.0.1
```



æ‰€æœ‰çš„ç½‘å¡åœ°å€ï¼š

> åŒæ—¶å¯åŠ¨æ‰€æœ‰çš„IPï¼Œç”¨æˆ·æ— è®ºå¯åŠ¨å“ªä¸ªIPï¼Œéƒ½èƒ½å¯åŠ¨å¯¹åº”ä¸šåŠ¡

```
0.0.0.0
```





### æŸ¥çœ‹è·¯ç”±è¡¨ä¿¡æ¯

```bash
netstat -rn  # ç­‰åŒäºroute -n
```



## æ˜¾ç¤ºç½‘ç»œæ¥å£æƒ…å†µ

+ Ifaceï¼šç½‘ç»œè®¾å¤‡å
+ MIUï¼šæœ€å¤§ä¼ è¾“å•å…ƒï¼ˆå­—èŠ‚ï¼‰
+ RX-OK/TX-OKï¼šæ­£ç¡®æ¥æ”¶äº†å¤šå°‘æ•°æ®åŒ…ï¼Œå‘é€äº†å¤šå°‘æ•°æ®åŒ…
+ â€¦â€¦. ERRï¼šé”™è¯¯
+ Flgï¼šæ ‡è®°

```
netstat -i
```

![image-20220923134703496](https://sm.nsddd.top//typora/image-20220923134703496.png?mail:3293172751@qq.com)



## æŸ¥çœ‹æœåŠ¡å™¨ç›‘å¬

```bash
netstat -tunlp | grep 3306
netstat -tunlp | grep 80
netstat -tunlp | grep 443  # 443æ˜¯ç›‘å¬HTTPS æœåŠ¡æ˜¯å¦å…è®¸
netstat -tunlp | grep 23
```



## sså‘½ä»¤

`ss`æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°çš„å‘½ä»¤ï¼Œä¹Ÿæ˜¯æœ‰æœ‰å¾ˆå¤šçš„å‚æ•°

```bash
root@ubuntu:~# ss --help
Usage: ss [ OPTIONS ]
       ss [ OPTIONS ] [ FILTER ]
   -h, --help          this message
   -V, --version       output version information
   -n, --numeric       don't resolve service names
   -r, --resolve       resolve host names
   -a, --all           display all sockets
   -l, --listening     display listening sockets
   -o, --options       show timer information
   -e, --extended      show detailed socket information
   -m, --memory        show socket memory usage
   -p, --processes     show process using socket
   -i, --info          show internal TCP information
       --tipcinfo      show internal tipc socket information
   -s, --summary       show socket usage summary
       --tos           show tos and priority information
   -b, --bpf           show bpf filter socket information
   -E, --events        continually display sockets as they are destroyed
   -Z, --context       display process SELinux security contexts
   -z, --contexts      display process and socket SELinux security contexts
   -N, --net           switch to the specified network namespace name

   -4, --ipv4          display only IP version 4 sockets
   -6, --ipv6          display only IP version 6 sockets
   -0, --packet        display PACKET sockets
   -t, --tcp           display only TCP sockets
   -S, --sctp          display only SCTP sockets
   -u, --udp           display only UDP sockets
   -d, --dccp          display only DCCP sockets
   -w, --raw           display only RAW sockets
   -x, --unix          display only Unix domain sockets
       --tipc          display only TIPC sockets
       --vsock         display only vsock sockets
   -f, --family=FAMILY display sockets of type FAMILY
       FAMILY := {inet|inet6|link|unix|netlink|vsock|tipc|xdp|help}

   -K, --kill          forcibly close sockets, display what was closed
   -H, --no-header     Suppress header line
   -O, --oneline       socket's data printed on a single line

   -A, --query=QUERY, --socket=QUERY
       QUERY := {all|inet|tcp|udp|raw|unix|unix_dgram|unix_stream|unix_seqpacket|packet|netlink|vsock_stream|vsock_dgram|tipc}[,QUERY]

   -D, --diag=FILE     Dump raw information about TCP sockets to FILE
   -F, --filter=FILE   read filter information from FILE
       FILTER := [ state STATE-FILTER ] [ EXPRESSION ]
       STATE-FILTER := {all|connected|synchronized|bucket|big|TCP-STATES}
         TCP-STATES := {established|syn-sent|syn-recv|fin-wait-{1,2}|time-wait|closed|close-wait|last-ack|listening|closing}
          connected := {established|syn-sent|syn-recv|fin-wait-{1,2}|time-wait|close-wait|last-ack|closing}
       synchronized := {established|syn-recv|fin-wait-{1,2}|time-wait|close-wait|last-ack|closing}
             bucket := {syn-recv|time-wait}
                big := {established|syn-sent|fin-wait-{1,2}|closed|close-wait|last-ack|listening|closing}
```



### æ˜¾ç¤ºæ‰€æœ‰çš„socketå¥—æ¥å­—è¿æ¥æƒ…å†µ

```
ss -an
```



### æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨ç›‘å¬

```
ss -atulp
```

![image-20220923135410928](https://sm.nsddd.top//typora/image-20220923135410928.png?mail:3293172751@qq.com)



## END é“¾æ¥

<ul><li><div><a href = '3.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '5.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

