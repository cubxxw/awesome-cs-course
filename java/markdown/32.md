+ [author](https://github.com/3293172751)
+ <a href="https://github.com/3293172751" target="_blank"><img src="https://img.shields.io/badge/Github-xiongxinwei-inactive?style=social&logo=github"></a></p>

# ç¬¬32èŠ‚ Mybatiså…¥é—¨

+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](31.md)
> â¤ï¸ğŸ’•ğŸ’•javaçš„å­¦ä¹ æŒ‡å—,ä»å…¥é—¨åˆ°å¤§å¸ˆç¯‡ç« ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

::: warngin æé†’
 ğŸ“šè¿™ç¯‡ä¸»è¦æ˜¯è®²è§£ç¯‡ï¼Œå¯¹æ­¥éª¤å’Œ`mybatis`æ¶æ„çš„è®²è§£ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥è·³åˆ°ä¸‹ä¸€ç¯‡

 ğŸ“®ä¸‹ä¸€ç¯‡æ˜¯`mybatis`çš„é…ç½®æ–‡ä»¶ç›´æ¥å¯¼å…¥å°±å¥½~

:::



## mybatisæ˜¯ä»€ä¹ˆï¼Ÿ

+ [x] [å®˜æ–¹æ–‡æ¡£](https://mybatis.org/mybatis-3/zh/index.html)

`mybatis`æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…æ€§æ¡†æ¶ï¼Œç”¨äºç®€åŒ–`JDBC`å¼€å‘

> JDBCç¼ºç‚¹ï¼š
>
> 1. ç¡¬ç¼–ç ï¼ˆä¿®æ”¹éº»çƒ¦ â€“ å°†ä»£ç å†™æ­»ï¼‰
>    + æ³¨å†Œé©±åŠ¨ï¼Œè·å–é“¾æ¥
>    + sqlè¯­å¥
> 2. æ“ä½œç¹ç
>    + æ‰‹åŠ¨è®¾ç½®å‚æ•°
>    + æ‰‹åŠ¨å°è£…ç»“æœé›†

`Javaee`ä¸‰å±‚æ¶æ„ï¼š

+ è¡¨ç°å±‚
+ ä¸šåŠ¡å±‚
+ æŒä¹…å±‚

> mysqlç¯å¢ƒï¼šmysqlå®‰è£…çš„æ˜¯æ–°ç‰ˆçš„ï¼Œæ˜¯dockeræ‹‰å–çš„ã€‚



## æ¡†æ¶æ˜¯ä»€ä¹ˆï¼Ÿ

æ¡†æ¶æ˜¯ä¸€ä¸ªåŠæˆå“è½¯ä»¶ï¼Œæ˜¯ä¸€å¥—å¯é‡ç”¨çš„ã€é€šç”¨çš„ã€è½¯ä»¶åŸºç¡€ä»£ç æ¨¡å‹

åœ¨æ¡†æ¶åŸºç¡€ä¹‹ä¸Šæ„å»ºè½¯ä»¶ç¼–å†™æ›´åŠ é«˜æ•ˆã€è§„èŒƒã€é€šç”¨ã€å¯æ‰©å±•

> å°±æ˜¯ç”¨å°‘é‡çš„å·¥ä½œå®ç°ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡
>
> `mybatis`å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„`JDBC`ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚



## mybabisæ¡†æ¶ä»‹ç»

+ mybatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚çš„æ¡†æ¶ï¼Œæ˜¯apacheä¸‹çš„é¡¶çº§é¡¹ç›®ã€‚

  mybatisæ‰˜ç®¡åˆ°goolecodeä¸‹ï¼Œå†åæ¥æ‰˜ç®¡åˆ°githubä¸‹(https://github.com/mybatis/mybatis-3/releases)ã€‚

+ mybatisè®©ç¨‹åºå°†ä¸»è¦ç²¾åŠ›æ”¾åœ¨sqlä¸Šï¼Œé€šè¿‡mybatisæä¾›çš„æ˜ å°„æ–¹å¼ï¼Œè‡ªç”±çµæ´»ç”Ÿæˆï¼ˆåŠè‡ªåŠ¨åŒ–ï¼Œå¤§éƒ¨åˆ†éœ€è¦ç¨‹åºå‘˜ç¼–å†™sqlï¼‰æ»¡è¶³éœ€è¦sqlè¯­å¥ã€‚

+ mybatiså¯ä»¥å°†å‘ preparedStatementä¸­çš„è¾“å…¥å‚æ•°è‡ªåŠ¨è¿›è¡Œè¾“å…¥æ˜ å°„ï¼Œå°†æŸ¥è¯¢ç»“æœé›†çµæ´»æ˜ å°„æˆjavaå¯¹è±¡ã€‚ï¼ˆè¾“å‡ºæ˜ å°„ï¼‰

![img](http://sm.nsddd.top/smmybatis.png?xxw@nsddd.top)



## mybabiså¿«é€Ÿå…¥é—¨

1. é…ç½®`mybatis`çš„é…ç½®æ–‡ä»¶ï¼Œ`SqlMapConfig.xml`ï¼ˆåç§°ä¸å›ºå®šï¼‰

2. é€šè¿‡é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½`mybatis`è¿è¡Œç¯å¢ƒï¼Œåˆ›å»º`SqlSessionFactory`ä¼šè¯å·¥å‚(`SqlSessionFactory`åœ¨å®é™…ä½¿ç”¨æ—¶æŒ‰å•ä¾‹æ–¹å¼)

3. é€šè¿‡`SqlSessionFactory`åˆ›å»º`SqlSession`ã€‚`SqlSession`æ˜¯ä¸€ä¸ªé¢å‘ç”¨æˆ·æ¥å£ï¼ˆæä¾›æ“ä½œæ•°æ®åº“æ–¹æ³•ï¼‰ï¼Œå®ç°å¯¹è±¡æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå»ºè®®`sqlSession`åº”ç”¨åœºåˆåœ¨æ–¹æ³•ä½“å†…ã€‚

4. è°ƒç”¨`sqlSession`çš„æ–¹æ³•å»æ“ä½œæ•°æ®ã€‚å¦‚æœéœ€è¦æäº¤äº‹åŠ¡ï¼Œéœ€è¦æ‰§è¡Œ`SqlSession`çš„`commit()`æ–¹æ³•ã€‚

5. é‡Šæ”¾èµ„æºï¼Œå…³é—­`SqlSession`



## è®¾ç½®æ•°æ®åº“å’ŒåŸºæœ¬å­—æ®µ

```mysql
create database mybatis;
use mybatis;

drop table if exists tb_user;
# å¦‚æœè¿™ä¸ª tb_user è¡¨å­˜åœ¨ï¼Œå°±åˆ é™¤è¿™ä¸ªè¡¨

create table tb_user (
    id int primary key auto_increment,
  	username varchar(20),
    password varchar(20),
    gender char(1),
    addr varchar(30)
);
```

**æ·»åŠ å­—æ®µï¼š**

```mysql
insert into tb_user values (1, 'zhangsan','123' , 'ç”·', 'åŒ—äº¬');
insert into tb_user values (2, "æå››", '234', 'å¥³', 'å¤©æ´¥');
insert into tb_user values (3, "ç‹äº”", '11', 'å¥³', 'è¥¿å®‰'),(4, "ç†ŠæŸäºº", '20', 'ç”·', 'æ­¦æ±‰');
```

**æŸ¥è¯¢ï¼š**

![image-20221008201911392](http://sm.nsddd.top/smimage-20221008201911392.png?xxw@nsddd.top)



## å…¥é—¨

### å®‰è£…mybatis

è¦ä½¿ç”¨ MyBatisï¼Œ åªéœ€å°† [mybatis-x.x.x.jar](https://github.com/mybatis/mybatis-3/releases) æ–‡ä»¶ç½®äºç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸­å³å¯ã€‚

å¦‚æœä½¿ç”¨ Maven æ¥æ„å»ºé¡¹ç›®ï¼Œåˆ™éœ€å°†ä¸‹é¢çš„ä¾èµ–ä»£ç ç½®äº `pom.xml` æ–‡ä»¶ä¸­ï¼š

```xml
<dependency>
  <groupId>org.mybatis</groupId>
  <artifactId>mybatis</artifactId>
  <version>x.x.x</version>
</dependency>
```



## æ·»åŠ ä¾èµ–

```xml
<dependencies>
    <!-- mybatisæ ¸å¿ƒåŒ… -->
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis</artifactId>
        <version>3.5.1</version>
    </dependency>
    <!-- mysqlé©±åŠ¨åŒ… -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>8.0.13</version>
    </dependency>
    <!-- junitæµ‹è¯• -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
</dependencies>
```

> è¿˜å¯ä»¥å¯¼å…¥æ—¥å¿—é…ç½®æ–‡ä»¶`log4j`ï¼ŒåŠ ä¸Šè¿™ä¸ªåä¼šå¸®åŠ©æˆ‘ä»¬è¾“å‡ºä¸€äº›æ—¥å¿—ä¿¡æ¯



## åœ¨resourcesä¸‹é¢é…ç½®mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶

> ï¼ˆåç§°ä¸å›ºå®šï¼‰ï¼Œè¯¥æ–‡ä»¶æ˜¯ Mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å†…å®¹ä¸ºæ•°æ®æºã€äº‹åŠ¡ç®¡ç†ã€‚
>
> æ³¨æ„ï¼šmybatisçš„é…ç½®æ–‡ä»¶é¡ºåºéå¸¸çš„é‡è¦ï¼ï¼ï¼

![image-20221009105855242](./images/image-20221009105855242.png)

### mybatis-configæ–‡ä»¶

> ä¹ æƒ¯ä¸Šæ˜¯è¿™ä¹ˆå‘½åçš„ï¼Œå¹¶éå¼ºåˆ¶è¦æ±‚çš„ï¼Œæ•´åˆ`spring`åè¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥å¿½ç•¥æ‰ï¼Œæ‰€ä»¥æ“ä½œçš„æ—¶å€™ç›´æ¥å¤åˆ¶ã€ç²˜è´´ã€‚
>
> å­˜æ”¾çš„åœ°æ–¹åœ¨`resources/mybatis-config`

```xml
<?xml version="1.0" encoding="UTF-8" ?> <!--å£°æ˜-->
<!DOCTYPE configuration   <!--configurationä¸»æ ‡ç­¾ï¼Œå’Œmappersæ ‡ç­¾-->
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<!--dtdæ˜¯çº¦æŸ-->
<configuration>
    <!-- å¼•ç”¨ jdbc.properties é…ç½®æ–‡ä»¶ -->
    <properties resource="jdbc.properties"/>

    <!-- typeAliases è®¾ç½®ç±»å‹åˆ«å -->
    <typeAliases>
        <typeAlias alias="User" type="org.example.User"/>
   </typeAliases>

    <!-- environments ç¯å¢ƒé…ç½® -->
    <environments default="development">
        <environment id="development">
            <!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç† ä»¥jdbcæ¥å¤„ç†çš„-->
            <transactionManager type="JDBC"/>
            <!-- æ•°æ®åº“è¿æ¥æ±  -->
            <!-- æ•°æ®åº“è¿æ¥ç›¸å…³é…ç½® ,è¿™é‡ŒåŠ¨æ€è·å–jdbc.propertiesæ–‡ä»¶ä¸­çš„å†…å®¹-->
            <dataSource type="POOLED">
                <property name="driver" value="com.mysql.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://localhost:3306"/>
                <property name="username" value="root"/>
                <property name="password" value="$123456"/>
            </dataSource>
        </environment>
    </environments>

    <!-- åŠ è½½ mapper æ˜ å°„æ–‡ä»¶ -->
    <mappers>
        <mapper resource="UserMapper.xml"/>
    </mappers>
</configuration>
```

> åˆ›å»ºæ˜ å°„æ–‡ä»¶ï¼Œæ³¨æ„åˆ›å»ºæ˜ å°„æ–‡ä»¶åä¸€å®šè¦å¼•å…¥åˆ°`mappers`ä¸­



**å¼•ç”¨ jdbc.properties æ–‡ä»¶**ï¼Œè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§

**å¼•å…¥é…ç½®æ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨`${key}`çš„æ–¹å¼è®¿é—®value**

> åœ¨ resource æ–‡ä»¶å¤¹æ–°å»º jdbc.properties é…ç½®æ–‡ä»¶ï¼Œä¿å­˜é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚
>
> `JDBC` è¿æ¥ `MySQL5` ä½¿ç”¨é©±åŠ¨åŒ… `com.mysql.jdbc.Driver`ï¼Œ`JDBC` è¿æ¥ `MySQL6` åŠä»¥ä¸Šä½¿ç”¨é©±åŠ¨åŒ… `com.mysql.cj.jdbc.Driver`ï¼Œä¸”éœ€è¦æŒ‡å®šæ—¶åŒº `serverTimezone`ã€‚
>
> + `demo_1`ï¼šæ•°æ®åº“åç§°
> + `serverTimezone`ï¼šæ—¶åŒº

```mysql
# mysqlé©±åŠ¨åŒ…å
driver=com.mysql.cj.jdbc.Driver
# æ•°æ®åº“è¿æ¥åœ°å€
url=jdbc:mysql://localhost:3306/demo_1? serverTimezone=GMT &useUnicode=true& characterEncoding=utf8
# ç”¨æˆ·å
username=root
# å¯†ç 
password=123456
```



**å¼•å…¥typeAliases è®¾ç½®ç±»å‹åˆ«å**

> æ³¨æ„ `typeAliases `è¦åœ¨`properties`é…ç½®çš„åé¢ï¼Œé¡ºåºå¾ˆé‡è¦ ï¼Œè®¾ç½®åˆ«åæœ‰ä¸¤ç§æ–¹å¼

ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰ï¼Œç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚

```xml
<typeAliases>
    <typeAlias alias="User" type="com.noteligible.pojo.User"/>
</typeAliases>
```

ä¹Ÿå¯ä»¥ä¸è¦`alias`

```xml
<typeAliases>
    <typeAlias type="com.noteligible.pojo.User"/>
</typeAliases>
```

> ç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨`User`å°±å¯ä»¥äº†ï¼Œé»˜è®¤çš„åˆ«åå°±æ˜¯åˆ«å`User`ä¸”ä¸åŒºåˆ†å¤§å°å†™
>
> ```xml
> <insert id="insertUser" parameterType="cn.edu.wtu.po.User">
>     <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
>         SELECT LAST_INSERT_ID()
>     </selectKey>
>     insert into user (username,birthday,sex,address) value(#{username},#{birthday},#{sex},#{address})
> </insert>
> ```

ä½†ä¸€èˆ¬æ¥è¯´pojoéƒ½ä¼šæœ‰å¾ˆå¤šï¼Œ æ‰€ä»¥ `mybatis` æ”¯æŒæŒ‡å®šåŒ…åï¼Œæ‰¹é‡æŒ‡å®šåˆ«åï¼Œæ‰«ææ•´ä¸ªåŒ…ä¸‹çš„ç±»ã€‚

> æˆ‘è§‰å¾—è¿™æ ·çš„å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½æ–‡ä»¶å¾ˆå¤šï¼Œè¿™æ ·çš„è¯ï¼Œ`com.noteligible.pojo`ä¸‹é¢çš„æ‰€æœ‰ç±»éƒ½å¯ä»¥é€šè¿‡ç±»åè®¿é—®

```xml
<typeAliases>
    <package name="com.noteligible.pojo"/>
    <!-- å…¶ä»–åŒ… -->
</typeAliases>
```



**environments ç¯å¢ƒé…ç½®**

> environments å¯¹åº”çš„æ˜¯æ•°æ®åº“ç›¸å…³çš„å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©å…¶ä¸€ï¼Œå’Œspringæ•´åˆå environmentsé…ç½®å°†åºŸé™¤ã€‚



**åŠ è½½ mappers æ˜ å°„æ–‡ä»¶**

> åŠ è½½sqlçš„æ˜ å°„æ–‡ä»¶ â€” å¯¹åº”çš„æ–‡ä»¶ â€“ çœ‹å®˜ç½‘

**æ–°å»ºæ–‡ä»¶`UserMapper.xml`**   ï¼š`User`æ˜¯æˆ‘çš„è¡¨åç§°

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    namespca: å‘½åç©ºé—´  åé¢ä¼šè¯¦ç»†è®²
    id: sqlçš„å”¯ä¸€æ ‡è¯†  ä¸èƒ½é‡å¤
    parameterType: å‚æ•°ç±»å‹
    resultType: è¿”å›å€¼ç±»å‹ï¼Œ å¯¹åº”çš„æ˜¯åŒ…è·¯å¾„  org.example.User
-->
<mapper namespace="org.mybatis.example.BlogMapper">
    <select id="selectall" resultType="org.example.User">
        select * from tb_user;
    </select>
</mapper>
```

>  âš ï¸ä¸€å®šè¦æ³¨æ„çš„æ˜¯ï¼š`<mapper namespace="org.mybatis.example.BlogMapper">`çš„`namespace`ä¸€å®šè¦å’Œ`mapper`æ¥å£åç§°ä¿æŒä¸€è‡´ã€‚

æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„åŠ è½½å•ä¸ªæ˜ å°„æ–‡ä»¶

```html
<mappers>
    <mapper resource="com/noteligible/mapper/UserMapper.xml"/>
</mappers>
```



æ–¹æ³•äºŒï¼šä½¿ç”¨`mapper`æ¥å£ç±»è·¯å¾„åŠ è½½å•ä¸ªæ˜ å°„æ–‡ä»¶

ï¼ˆæ­¤æ–¹æ³•è¦æ±‚`mapper`æ¥å£åç§°å’Œ`mapper`æ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œä¸”æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ï¼‰

```xml
<mappers>
    <mapper class="com.noteligible.mapper.UserMapper"/>
</mappers>
```



æ–¹æ³•ä¸‰ï¼šæŒ‡å®šåŒ…åæ‰¹é‡åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œè¯¥é…ç½®ä¼šæ‰«ææŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰ `.xml` æ–‡ä»¶ã€‚

ï¼ˆæ­¤æ–¹æ³•è¦æ±‚`mapper`æ¥å£åç§°å’Œ`mapper`æ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œä¸”æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ï¼‰

>  âš¡æ³¨æ„ç»†èŠ‚ï¼š
>
> + åœ¨`resources`ç›®å½•ä¸‹é¢åˆ›å»ºçš„ä¸æ˜¯ä»¥åŒ…åˆ›å»ºï¼ˆåŒ…å¯ä»¥ç”¨`.`é—´éš”åˆ†å±‚ï¼‰ï¼Œè€Œæ˜¯ä»¥ç›®å½•æ–¹å¼åˆ›å»ºï¼Œæ‰€ä»¥æ˜¯ä»¥`/`åˆ†å±‚

```xml
<mappers>
    <package name="com.noteligible.mapper"/>
</mappers>
```

![image-20221010214411890](./images/image-20221010214411890.png)



## mybatiså¼€å‘daoçš„æ–¹æ³•

**åŸå§‹dao çš„æ–¹æ³•**

- éœ€è¦ç¨‹åºå‘˜ç¼–å†™daoæ¥å£å’Œå®ç°ç±»
- éœ€è¦åœ¨daoå®ç°ç±»ä¸­æ³¨å…¥ä¸€ä¸ªSqlSessionFactoryå·¥å‚

> è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨ï¼Œåæ­£æˆ‘æ˜¯æ²¡æœ‰ä½¿ç”¨çš„ã€‚



**mapperä»£ç†å¼€å‘æ–¹æ³•ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰**

åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™`mapper`æ¥å£ï¼ˆå°±æ˜¯`dao`æ¥å£ï¼‰ã€‚
ç¨‹åºå‘˜åœ¨ç¼–å†™`mapper.xml`(æ˜ å°„æ–‡ä»¶)å’Œ`mapper.java`éœ€è¦éµå¾ªä¸€ä¸ªå¼€å‘è§„èŒƒï¼š

- `mapper.xml`ä¸­`namespace`å°±æ˜¯`mapper.java`çš„ç±»å…¨è·¯å¾„ã€‚
- `mapper.xml`ä¸­`statement`çš„idå’Œ`mapper.java`ä¸­æ–¹æ³•åä¸€è‡´ã€‚
- `mapper.xml`ä¸­`statement`çš„`parameterType`æŒ‡å®šè¾“å…¥å‚æ•°çš„ç±»å‹å’Œ`mapper.java`çš„æ–¹æ³•è¾“å…¥å‚æ•°ç±»å‹ä¸€è‡´
- `mapper.xml`ä¸­`statement`çš„`resultType`æŒ‡å®šè¾“å‡ºç»“æœçš„ç±»å‹å’Œ`mapper.java`çš„æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚

+ `SqlMapConfig.xml`é…ç½®æ–‡ä»¶ï¼šå¯ä»¥é…ç½®`properties`å±æ€§ã€åˆ«åã€`mapper`åŠ è½½ã€‚




## ç¼–å†™ç¨‹åº

![image-20221009120350150](./images/image-20221009120350150.png)

**æ–°å»º`User`ç±»**

```java
package org.example;

public class User {
    private Integer id;
    private String username;
    private String password;
    private String gender;

    private String addr;

    public User(Integer id, String username, String password, String gender, String addr) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.gender = gender;
        this.addr = addr;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getGender() {
        return gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public String getAddr() {
        return addr;
    }

    public void setAddr(String addr) {
        this.addr = addr;
    }

    @Override
    public String toString() {
        return "User{" +
                "id=" + id +
                ", username='" + username + '\'' +
                ", password='" + password + '\'' +
                ", gender='" + gender + '\'' +
                ", addr='" + addr + '\'' +
                '}';
    }
}
```



### åˆ›å»ºæµ‹è¯•ç±»

**å°†ä¸‹é¢çš„å†…å®¹ç²˜è´´åˆ°æµ‹è¯•æ–‡ä»¶`top.nsddd.Mybatis`**

```java
String resource = "org/mybatis/example/mybatis-config.xml";
InputStream inputStream = Resources.getResourceAsStream(resource);
SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
```

`Mybatis`

```java
package top.nsddd;
/*
* mybatiså…¥é—¨ä»£ç 
*/
public class mybatis {
    String resource = "mybatis-config.xml";
    InputStream inputStream = Resources.getResourceAsStream(resource);
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
}
```



## mybatisæ˜ å°„æ–‡ä»¶

**ç›¸å…³æ¦‚å¿µï¼šORM â€“ å…³ç³»å¯¹è±¡æ˜ å°„**

+ å¯¹è±¡ï¼š Javaå®ä½“ç±»å¯¹è±¡
+ å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“
+ æ˜ å°„ï¼šä¸¤è€…ä¹‹é—´çš„å…³ç³»



### å‘½åè§„åˆ™

1. `mybatis`ä¸­æ”¯æŒé¢å¯¹æ¥å£çš„æ•°æ®æ“ä½œï¼Œè¦ä¿è¯ä¸¤ä¸ªä¸€è‡´ï¼š
   1. `a > mapper`æ¥å£çš„å…¨ç±»åå’Œæ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ï¼ˆ`namespace`ï¼‰ä¿æŒä¸€è‡´
   2. `b > mapper`æ¥å£çš„æ–¹æ³•çš„æ–¹æ³•åå’Œæ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™çš„SQLçš„æ ‡ç­¾çš„`id`å±æ€§ä¿æŒä¸€è‡´
2. è¡¨åç§°æ‰€å¯¹åº”çš„`å®ä½“ç±»çš„ç±»å + Mapper.xml`

![image-20221009181612461](./images/image-20221009181612461.png)



## ideaæ–‡ä»¶æ¨¡æ¿åŠŸèƒ½ï¼Ÿ

> æ˜¯ä¸æ˜¯æ„Ÿè§‰ä¸Šé¢çš„é…ç½®æ–‡ä»¶å¾ˆå¤æ‚ï¼Œè€Œä¸”å¾ˆå›ºå®šï¼Œæ¯æ¬¡æ–°å»ºä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼Œå…¶å®`idea`ä¸­æœ‰æ¨¡æ¿åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥é…ç½®ã€‚

![image-20221010215722771](./images/image-20221010215722771.png)



### å†…å®¹å‚è€ƒä»¥ä¸‹

1ã€è®¾ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶ `mybatis-config.xml` çš„æ¨¡æ¿

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
 
    <properties resource="jdbc.properties"></properties>
 
    <typeAliases>
        <package name=""/>
    </typeAliases>
 
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
    </environments>
 
    <mappers>
        <mapper resource=""/>
    </mappers>
</configuration>
```



2ã€è®¾ç½®æ˜ å°„æ–‡ä»¶çš„æ¨¡æ¿ `mybatis-maper.xml` 

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="">
 
 
</mapper>
```

> æŠŠä¸€äº›é‡è¦çš„é…ç½®ä¿¡æ¯ä¿å­˜èµ·æ¥æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚



## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](31.md)
+ [ä¸‹ä¸€èŠ‚](33.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)