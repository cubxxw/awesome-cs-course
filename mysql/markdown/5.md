+ [author](https://github.com/3293172751)

# ç¬¬5èŠ‚ çº¦æŸ

+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](4.md)
> â¤ï¸ğŸ’•ğŸ’•æ•°æ®åº“çš„é«˜çº§æŒ‡å—ï¼Œå¦‚ä½•åœ¨ MySQLã€SQL Serverã€MS Accessã€Oracleã€Sybaseã€Informixã€Postgres å’Œå…¶ä»–æ•°æ®åº“ç³»ç»Ÿä¸­ä½¿ç”¨ SQLï¼Œå¦‚ä½•ä»å¤´å®ç°ä¸€ä¸ªæ•°æ®åº“ç³»ç»Ÿï¼Œæˆ‘ä»¬å¼€å§‹å§ï¼Myblog:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

## çº¦æŸConstraints

+ çº¦æŸä½œç”¨äºè¡¨ä¸Šåˆ—ä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶åŠ å…¥è¡¨ä¸­çš„æ•°æ®
+ çº¦æŸçš„å­˜åœ¨æ˜¯ä¸ºäº†ä¿è¯æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ­£ç¡®æ€§ï¼Œæœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§ã€‚

> ç®€å•æ¥è¯´ï¼šSQL çº¦æŸç”¨äºä¸ºè¡¨ä¸­çš„æ•°æ®æŒ‡å®šè§„åˆ™ã€‚



## SQL åˆ›å»ºçº¦æŸ

`CREATE TABLE`å¯ä»¥åœ¨ä½¿ç”¨è¯­å¥åˆ›å»ºè¡¨æ—¶æŒ‡å®šçº¦æŸï¼Œä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨ è¯­å¥åˆ›å»ºè¡¨ä¹‹åæŒ‡å®šçº¦æŸ`ALTER TABLE`ã€‚

### å¥æ³•

```sql
CREATE TABLE *table_name* (
  *column1 datatype* *constraint*,
  *column2 datatype* *constraint*,
  *column3 datatype* *constraint*,
  ....
);
```



------

## SQL çº¦æŸ

SQL çº¦æŸç”¨äºä¸ºè¡¨ä¸­çš„æ•°æ®æŒ‡å®šè§„åˆ™ã€‚

çº¦æŸç”¨äºé™åˆ¶å¯ä»¥è¿›å…¥è¡¨çš„æ•°æ®ç±»å‹ã€‚è¿™ä¿è¯äº†è¡¨ä¸­æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚å¦‚æœçº¦æŸå’Œæ•°æ®æ“ä½œä¹‹é—´å­˜åœ¨ä»»ä½•å†²çªï¼Œåˆ™è¯¥æ“ä½œè¢«ä¸­æ­¢ã€‚

**çº¦æŸå¯ä»¥æ˜¯åˆ—çº§æˆ–è¡¨çº§ã€‚åˆ—çº§çº¦æŸåº”ç”¨äºåˆ—ï¼Œè¡¨çº§çº¦æŸåº”ç”¨äºæ•´ä¸ªè¡¨ã€‚**

**SQLä¸­å¸¸ç”¨çš„çº¦æŸå¦‚ä¸‹ï¼š**

- `NOT NULL`- ç¡®ä¿åˆ—ä¸èƒ½æœ‰ NULL å€¼
- `UNIQUE`- ç¡®ä¿åˆ—ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸åŒ
- `PRIMARY KEY`- a `NOT NULL`å’Œçš„ç»„åˆ`UNIQUE`ã€‚å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œ
- `FOREIGN KEY` - é˜²æ­¢ä¼šç ´åè¡¨ä¹‹é—´é“¾æ¥çš„æ“ä½œ
- `CHECK`- ç¡®ä¿åˆ—ä¸­çš„å€¼æ»¡è¶³ç‰¹å®šæ¡ä»¶
- `DEFAULT`- å¦‚æœæœªæŒ‡å®šå€¼ï¼Œåˆ™ä¸ºåˆ—è®¾ç½®é»˜è®¤å€¼
- `CREATE INDEX`- ç”¨äºéå¸¸å¿«é€Ÿåœ°ä»æ•°æ®åº“ä¸­åˆ›å»ºå’Œæ£€ç´¢æ•°æ®



## éç©ºçº¦æŸ

é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ—å¯ä»¥åŒ…å« NULL å€¼ã€‚

`NOT NULL`çº¦æŸå¼ºåˆ¶åˆ—ä¸æ¥å— NULL å€¼ã€‚

è¿™å¼ºåˆ¶å­—æ®µå§‹ç»ˆåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¿™æ„å‘³ç€æ‚¨ä¸èƒ½æ’å…¥æ–°è®°å½•æˆ–æ›´æ–°è®°å½•è€Œä¸å‘è¯¥å­—æ®µæ·»åŠ å€¼ã€‚



ä»¥ä¸‹ SQL ç¡®ä¿åœ¨åˆ›å»ºâ€œPersonsâ€è¡¨æ—¶â€œIDâ€ã€â€œLastNameâ€å’Œâ€œFirstNameâ€åˆ—ä¸ä¼šæ¥å— NULL å€¼ï¼š

```sql
CREATE TABLE Persons (
  ID int NOT NULL,
  LastName varchar(255) NOT NULL,
  FirstName varchar(255) NOT NULL,
  Age int
);
```



## SQL å”¯ä¸€çº¦æŸ

è¯¥`UNIQUE`çº¦æŸç¡®ä¿åˆ—ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸åŒã€‚

`UNIQUE`å’Œ çº¦æŸéƒ½`PRIMARY KEY`ä¸ºä¸€åˆ—æˆ–ä¸€ç»„åˆ—çš„å”¯ä¸€æ€§æä¾›äº†ä¿è¯ã€‚

`PRIMARY KEY`çº¦æŸè‡ªåŠ¨å…·æœ‰ çº¦æŸ`UNIQUE`ã€‚

ä½†æ˜¯ï¼Œæ¯ä¸ªè¡¨å¯ä»¥æœ‰è®¸å¤š`UNIQUE`çº¦æŸï¼Œä½†æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ª `PRIMARY KEY`çº¦æŸã€‚



### CREATE TABLE ä¸Šçš„ SQL å”¯ä¸€çº¦æŸ

ä»¥ä¸‹ SQLåœ¨åˆ›å»º`UNIQUE`â€œPersonsâ€è¡¨æ—¶å¯¹â€œIDâ€åˆ—åˆ›å»ºçº¦æŸï¼š

```sql
CREATE TABLE Persons (
  ID int NOT NULL UNIQUE,
  LastName varchar(255) NOT NULL,
  FirstName varchar(255),
  Age int
);
```



## SQL ä¸»é”®çº¦æŸ

çº¦æŸå”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„`PRIMARY KEY`æ¯æ¡è®°å½•ã€‚

ä¸»é”®å¿…é¡»åŒ…å« `UNIQUE` å€¼ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å« `NULL` å€¼ã€‚

ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼›åœ¨è¡¨ä¸­ï¼Œè¿™ä¸ªä¸»é”®å¯ä»¥ç”±å•ä¸ªæˆ–å¤šä¸ªåˆ—ï¼ˆå­—æ®µï¼‰ç»„æˆã€‚



### åˆ›å»ºè¡¨ä¸Šçš„ SQL ä¸»é”®

ä»¥ä¸‹ SQL åœ¨åˆ›å»º`PRIMARY KEY`â€œPersonsâ€è¡¨æ—¶åœ¨â€œIDâ€åˆ—ä¸Šåˆ›å»ºä¸€ä¸ªï¼š

**MySQLï¼š**

```sql
CREATE TABLE Persons (
  ID int NOT NULL,
  LastName varchar(255) NOT NULL,
  FirstName varchar(255),
  Age int,
  PRIMARY KEY (ID) #åˆ›å»ºä¸»å¥çº¦æŸ
);
```

### åˆ é™¤ä¸»é”®çº¦æŸ

è¦åˆ é™¤`PRIMARY KEY`çº¦æŸï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ SQLï¼š

**MySQLï¼š**

```sql
ALTER TABLE Persons
DROP PRIMARY KEY;
```



## SQL å¤–é”®çº¦æŸ

> å¤–é”®çº¦æŸæ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾ç†è§£çš„çº¦æŸ,æ‰€ä»¥è¿™ä¸ªç¯‡ç« æ¯”è¾ƒé•¿
>
> å¤–é”®æœ¬èº«æ˜¯ä¸ºäº†åœ¨ä¸¤ä¸ªè¡¨å»ºç«‹è¿æ¥,ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§
>
> å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬åœ¨æ•™åŠ¡ç³»ç»Ÿæ³¨å†Œå,è´¦æˆ·è¿˜æ˜¯å¯ä»¥åœ¨å­¦ç±ç¼´è´¹ç³»ç»Ÿç™»é™†ï¼

è¯¥`FOREIGN KEY`çº¦æŸç”¨äºé˜²æ­¢ä¼šç ´åè¡¨ä¹‹é—´é“¾æ¥çš„æ“ä½œã€‚

A`FOREIGN KEY`æ˜¯ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µï¼ˆæˆ–å­—æ®µé›†åˆï¼‰ï¼Œå®ƒå¼•ç”¨`PRIMARY KEY`å¦ä¸€ä¸ªè¡¨ä¸­çš„ ã€‚

å…·æœ‰å¤–é”®çš„è¡¨ç§°ä¸ºå­è¡¨ï¼Œå…·æœ‰ä¸»é”®çš„è¡¨ç§°ä¸ºå¼•ç”¨è¡¨æˆ–çˆ¶è¡¨ã€‚

çœ‹ä¸‹é¢ä¸¤å¼ è¡¨ï¼š

### äººå‘˜è¡¨

| **PersonID** | LastName  | FirstName | Age  |
| :----------- | :-------- | :-------- | :--- |
| 1            | Hansen    | Ola       | 30   |
| 2            | Svendson  | Tove      | 23   |
| 3            | Pettersen | Kari      | 20   |

### è®¢å•è¡¨

| OrderID | OrderNumber | **PersonID** |
| :------ | :---------- | :----------- |
| 1       | 77895       | 3            |
| 2       | 44678       | 3            |
| 3       | 22456       | 2            |
| 4       | 24562       | 1            |

è¯·æ³¨æ„ï¼Œâ€œOrdersâ€è¡¨ä¸­çš„â€œPersonIDâ€åˆ—æŒ‡å‘â€œPersonsâ€è¡¨ä¸­çš„â€œPersonIDâ€åˆ—ã€‚

â€œPersonsâ€è¡¨ä¸­çš„â€œPersonIDâ€åˆ—åœ¨â€œ `PRIMARY KEY`Personsâ€è¡¨ä¸­ã€‚

â€œè®¢å•â€è¡¨ä¸­çš„â€œPersonIDâ€åˆ—æ˜¯â€œè®¢å•â€è¡¨ä¸­çš„ä¸€ä¸ª` FOREIGN KEY`ã€‚

è¯¥`FOREIGN KEY`çº¦æŸé˜²æ­¢å°†æ— æ•ˆæ•°æ®æ’å…¥å¤–é”®åˆ—ï¼Œå› ä¸ºå®ƒå¿…é¡»æ˜¯çˆ¶è¡¨ä¸­åŒ…å«çš„å€¼ä¹‹ä¸€ã€‚



### CREATE TABLE ä¸Šçš„ SQL FOREIGN KEY

> å¤–é”®å…¶å®æœ‰å‘½åè§„èŒƒçš„:
>
> å¤–é”®ä¸€èˆ¬ä»¥fkå¼€å¤´
>
> ```
> fk _ è¡¨å _ è¡¨å
> ```
>
> 

**è¯­æ³•**

```sql
  CONSTRAINT å¤–é”®åç§° FOREIGN KEY å¤–é”®åˆ—å
  REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å)
```

**ä¹Ÿå¯ä»¥å»ºå®Œè¡¨åå†æ·»åŠ å¤–é”®çº¦æŸ**

```sql
alter table è¡¨å add constraint å¤–é”®å foreign key (å¤–é”®å­—æ®µå) references ä¸»è¡¨å(ä¸»è¡¨åˆ—å)
```

**å¯ä»¥åˆ é™¤å¤–é”®çº¦æŸ**

```sql
alter table è¡¨å orop foreign key å¤–é”®å
```

ä»¥ä¸‹ SQL`FOREIGN KEY`åœ¨â€œOrdersâ€è¡¨åˆ›å»ºæ—¶åœ¨â€œPersonIDâ€åˆ—ä¸Šåˆ›å»ºä¸€ä¸ªï¼š

**MySQLï¼š**

```sql
CREATE TABLE Orders (
  OrderID int NOT NULL,
  OrderNumber int NOT NULL,
  PersonID int,
  PRIMARY KEY (OrderID),
  FOREIGN KEY (PersonID) REFERENCES Persons(PersonID)
);
```



è¦å…è®¸å‘½å`FOREIGN KEY`çº¦æŸä»¥åŠå®šä¹‰` FOREIGN KEY`å¤šåˆ—çº¦æŸï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ SQL è¯­æ³•ï¼š

**MySQL / SQL Server / Oracle / MS Accessï¼š**

```sql
CREATE TABLE Orders (
  OrderID int NOT NULL,
  OrderNumber int NOT NULL,
  PersonID int,
  PRIMARY KEY (OrderID),
  CONSTRAINT FK_PersonOrder FOREIGN KEY (PersonID)
  REFERENCES Persons(PersonID)
);
```



## è‡ªåŠ¨å¢é•¿

è‡ªåŠ¨å¢é•¿`auto_increment`:**å½“å‰åˆ—æ˜¯æ•°å­—ç±»å‹å¹¶ä¸” å”¯ä¸€çº¦æŸ**

```sql
create table emp (
	id int primary key auto_increment,	# ä¸€å®šè¦æ˜¯æ•°å­—å¹¶ä¸”primary key å…·æœ‰å”¯ä¸€
    ename varchar(50) not null unique,
    joindate date not null
)
```

MySQL ä½¿ç”¨`AUTO_INCREMENT`å…³é”®å­—æ¥æ‰§è¡Œè‡ªåŠ¨å¢é‡åŠŸèƒ½ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œ çš„èµ·å§‹å€¼ä¸º`AUTO_INCREMENT`1ï¼Œæ¯å¢åŠ ä¸€æ¡æ–°è®°å½•ï¼Œå®ƒå°±ä¼šå¢åŠ  1ã€‚

è¦è®©`AUTO_INCREMENT`åºåˆ—ä»¥å¦ä¸€ä¸ªå€¼å¼€å§‹ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ SQL è¯­å¥ï¼š

```
ALTER TABLE Persons AUTO_INCREMENT=100;
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ–°çš„æ•°æ®åŠ å…¥åˆ°è¡¨ä¸­,å°±å¯ä»¥ä¸æŒ‡å®š`id`äº†,`id`å¯ä»¥è‡ªå·±é•¿å¤§

```sql
insert into emp (ename,joindate) values("å¼ ä¸‰","1031-01-30") 
```



## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](4.md)
+ [ä¸‹ä¸€èŠ‚](6.md)
---
+ [**å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•**](https://nsddd.top/archives/contributors))