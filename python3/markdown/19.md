+ [author](http://nsddd.top)

# ç¬¬19èŠ‚ NumPyæ•™ç¨‹

<div><a href = '18.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '20.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>


> â¤ï¸ğŸ’•ğŸ’•`python`æ˜¯ä¸€ç§åŠ¨æ€çš„è§£é‡Šå½¢è¯­è¨€ï¼Œç”±äº`python`çš„æ™®éæ€§ï¼Œå­¦ä¼š`python`èƒ½æ›´å¿«çš„è§£å†³é—®é¢˜ï¼Œä»¥åŠå­¦ä¹ å…¶ä»–çš„çŸ¥è¯†ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## numpy

NumPy æ˜¯ä¸€ä¸ª Python åº“ã€‚

NumPy ç”¨äºå¤„ç†æ•°ç»„ã€‚

NumPy æ˜¯â€œæ•°å€¼ Pythonâ€çš„ç¼©å†™ã€‚

```
pip install numpy
```



## åˆ›å»ºnumpy

```py
In [70]: import numpy as np 
    ...:  
    ...: arr = np.array([1, 2, 3, 4, 5]) 
    ...:  
    ...: print(arr) 
    ...:  
    ...: print(type(arr))                                   
[1 2 3 4 5]
<class 'numpy.ndarray'>
```



### å¤šç»´æ•°ç»„

**æ£€æŸ¥æ•°ç»„æœ‰å¤šå°‘ç»´**

```py
In [3]: import numpy as np 
   ...:  
   ...: a = np.array(42) 
   ...: b = np.array([1, 2, 3, 4, 5]) 
   ...: c = np.array([[1, 2, 3], [4, 5, 6]]) 
   ...: d = np.array([[[1, 2, 3], [4, 5, 6]], [[1, 2, 3], [4
   ...: , 5, 6]]]) 
   ...:  
   ...: print(a.ndim) 
   ...: print(b.ndim) 
   ...: print(c.ndim) 
   ...: print(d.ndim)                                       
0
1
2
3
```



## ç´¢å¼•

**è´Ÿç´¢å¼•**

æ‰“å°ç¬¬äºŒåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ 

```py
In [8]: import numpy as np 
   ...:  
   ...: arr = np.array([[1,2,3,4,5], [6,7,8,9,10]]) 
   ...:  
   ...: print('Last element from 2nd dim: ', arr[1, -1])    
Last element from 2nd dim:  10
```



**åˆ‡ç‰‡**

```py
In [12]: import numpy as np 
    ...:  
    ...: arr = np.array([1, 2, 3, 4, 5, 6, 7]) 
    ...:  
    ...: print(arr[4:])                                     
[5 6 7]
```



**äºŒç»´æ•°ç»„åˆ‡ç‰‡**

```py
In [13]: arr = np.array([[12,12,34],[12,43,54]])            

In [15]: arr[0:]                                            
Out[15]: 
array([[12, 12, 34],
       [12, 43, 54]])

In [16]: arr[1,0:]                                          
Out[16]: array([12, 43, 54])

In [17]: arr[0,0:]                                          
Out[17]: array([12, 12, 34])

In [18]: arr[1:,1:]         # ä»ç¬¬äºŒåˆ—åˆ°åé¢æ‰€æœ‰åˆ— -- ä»ç¬¬äºŒè¡Œåˆ°åé¢æ‰€æœ‰è¡Œ  
Out[18]: array([[43, 54]])
```



**å¤åˆ¶ä»¥åŠæ˜¾ç¤º**

```py
In [19]: x = arr.copy()                                     

In [20]: x                                                  
Out[20]: 
array([[12, 12, 34],
       [12, 43, 54]])

In [21]: x = arr.view()                                     

In [22]: x                                                  
Out[22]: 
array([[12, 12, 34],
       [12, 43, 54]])
```

â— å‰¯æœ¬å’Œè§†å›¾çš„åŒºåˆ«ï¼š

+ å‰¯æœ¬ä¸å—åˆ°åŸæ¥çš„æ•°ç»„æ›´æ”¹æ‰€å¸¦æ¥çš„å½±å“
+ è§†å›¾ä¼šå—åˆ°åŸæ¥çš„æ•°ç»„æ›´æ”¹æ‰€å¸¦æ¥çš„å½±å“

```py
In [23]: x[0] = 1000                                        

In [24]: x                                                  
Out[24]: 
array([[1000, 1000, 1000],
       [  12,   43,   54]])

In [25]: arr                                                
Out[25]: 
array([[1000, 1000, 1000],
       [  12,   43,   54]])
```



## æ•°ç»„é‡å¡‘ 

### è·å–æ•°ç»„çš„å½¢çŠ¶

```
In [27]: arr.shape                                          
Out[27]: (2, 3)
```

> æ˜¾ç¤ºä¸º `2Ã—3`



### æ•°ç»„é‡å¡‘

é‡å¡‘æ„å‘³ç€æ”¹å˜æ•°ç»„çš„å½¢çŠ¶ã€‚

æ•°ç»„çš„å½¢çŠ¶æ˜¯æ¯ä¸ªç»´åº¦ä¸­å…ƒç´ çš„æ•°é‡ã€‚

é€šè¿‡é‡å¡‘ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ–åˆ é™¤ç»´åº¦æˆ–æ›´æ”¹æ¯ä¸ªç»´åº¦ä¸­çš„å…ƒç´ æ•°é‡ã€‚



### äºŒç»´å˜ä¸€ç»´

æ‰å¹³åŒ–æ•°ç»„æ„å‘³ç€å°†å¤šç»´æ•°ç»„è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„ã€‚

æˆ‘ä»¬å¯ä»¥ç”¨å®ƒ`reshape(-1)`æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

**æ³¨æ„ï¼šéœ€è¦ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶**

```py
In [28]: arr                                                
Out[28]: 
array([[1000, 1000, 1000],
       [  12,   43,   54]])

In [29]: arr.reshape(-1)                                    
Out[29]: array([1000, 1000, 1000,   12,   43,   54])

In [30]: arr                                                
Out[30]: 
array([[1000, 1000, 1000],
       [  12,   43,   54]])
```



### ä¸€ç»´å˜å¤šç»´

```py
In [52]: arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
    ...: 12]) 
    ...:  
    ...: newarr = arr.reshape(2, 3, 2)                      

In [53]: newarr.view()                                      
Out[53]: 
array([[[ 1,  2],
        [ 3,  4],
        [ 5,  6]],

       [[ 7,  8],
        [ 9, 10],
        [11, 12]]])

```



## éå†

**pythonçš„éå†å’ŒGoè¯­è¨€çš„rangeç‰¹åˆ«åƒ**

```python
In [10]: import numpy as np

In [11]: arr = np.array([[1, 2, 3], [4, 5, 6]])

In [12]: arr.view()
Out[12]:
array([[1, 2, 3],
       [4, 5, 6]])

In [13]: for x in arr:
    ...:     for y in x:
    ...:         print(y)
    ...:
1
2
3
4
5
6
```

## ä½¿ç”¨ ndenumerate() è¿›è¡Œæšä¸¾è¿­ä»£

> å°¤å…¶æ˜¯`ndenumerate()`ç®€ç›´å°±å’ŒGoè¯­è¨€ä¸€æ¨¡ä¸€æ ·
>
> ```go
> arr := [12,3,2,32,2,3,3]
> for i,v = range arr {
>     fmt.Printf("%d çš„å€¼ä¸º %d",i,v)	
> }
> ```

æšä¸¾æ˜¯æŒ‡ä¸€ä¸€æåˆ°æŸäº‹çš„åºå·ã€‚

æœ‰æ—¶æˆ‘ä»¬åœ¨è¿­ä»£æ—¶éœ€è¦å…ƒç´ çš„ç›¸åº”ç´¢å¼•ï¼Œè¯¥`ndenumerate()`æ–¹æ³•å¯ä»¥ç”¨äºé‚£äº›ç”¨ä¾‹ã€‚

æšä¸¾ä»¥ä¸‹ä¸€ç»´æ•°ç»„å…ƒç´ ï¼š

```py
In [14]: arr.reshape(-1)
Out[14]: array([1, 2, 3, 4, 5, 6])

In [15]: for i,v in np.ndenumerate(arr):
    ...:     print(i,v)
    ...:
(0, 0) 1
(0, 1) 2
(0, 2) 3
(1, 0) 4
(1, 1) 5
(1, 2) 6
```



## æ•°ç»„è¿æ¥

è¿æ¥æ„å‘³ç€å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„çš„å†…å®¹æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚

åœ¨ SQL ä¸­ï¼Œæˆ‘ä»¬åŸºäºé”®è¿æ¥è¡¨ï¼Œè€Œåœ¨ NumPy ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è½´è¿æ¥æ•°ç»„ã€‚

æˆ‘ä»¬å°†ä¸€ç³»åˆ—æƒ³è¦åŠ å…¥ `concatenate()`å‡½æ•°çš„æ•°ç»„ä¸è½´ä¸€èµ·ä¼ é€’ã€‚å¦‚æœæœªæ˜¾å¼ä¼ é€’axisï¼Œåˆ™å°†å…¶è§†ä¸º0ã€‚

>  â—æ³¨æ„è¿™ä¸ªæ‹¬å·`np.concatenate((arr1,arr2))`ï¼Œä¸¤å±‚

```python
In [1]: import numpy as np

In [2]: arr1 = np.array([1, 2, 3])
   ...:
   ...: arr2 = np.array([4, 5, 6])

In [5]: arr = np.concatenate((arr1,arr2))
```

### ä½¿ç”¨å †æ ˆå‡½æ•°è¿æ¥æ•°ç»„

å †å ä¸ä¸²è”ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å †å æ˜¯æ²¿ç€ä¸€ä¸ªæ–°çš„è½´å®Œæˆçš„ã€‚

æˆ‘ä»¬å¯ä»¥æ²¿ç€ç¬¬äºŒä¸ªè½´è¿æ¥ä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œè¿™å°†å¯¼è‡´å®ƒä»¬ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªä¸Šï¼Œå³ã€‚å †å ã€‚

æˆ‘ä»¬å°†ä¸€ç³»åˆ—æƒ³è¦åŠ å…¥åˆ° `stack()`æ–¹æ³•ä¸­çš„æ•°ç»„ä¸è½´ä¸€èµ·ä¼ é€’ã€‚å¦‚æœæœªæ˜¾å¼ä¼ é€’è½´ï¼Œåˆ™å°†å…¶è§†ä¸º 0ã€‚

```python
import numpy as np

arr1 = np.array([1, 2, 3])

arr2 = np.array([4, 5, 6])

arr = np.stack((arr1, arr2), axis=1)

print(arr)
```



### æ²¿è¡Œå †å 

NumPy æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼š`hstack()` æ²¿è¡Œå †å ã€‚

```python
import numpy as np

arr1 = np.array([1, 2, 3])

arr2 = np.array([4, 5, 6])

arr = np.hstack((arr1, arr2))

print(arr)
```



### æ²¿åˆ—å †å 

NumPy æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼š`vstack() ` æ²¿åˆ—å †å ã€‚

```python
import numpy as np

arr1 = np.array([1, 2, 3])

arr2 = np.array([4, 5, 6])

arr = np.vstack((arr1, arr2))

print(arr)
```

### æ²¿é«˜åº¦ï¼ˆæ·±åº¦ï¼‰å †å 

NumPy æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼š`dstack()` æ²¿é«˜åº¦å †å ï¼Œä¸æ·±åº¦ç›¸åŒã€‚

```py
import numpy as np

arr1 = np.array([1, 2, 3])

arr2 = np.array([4, 5, 6])

arr = np.dstack((arr1, arr2))

print(arr)
```



## æ•°ç»„æ‹†åˆ†

Splitting æ˜¯ Joining çš„é€†æ“ä½œã€‚

Join å°†å¤šä¸ªæ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªï¼ŒSplitting å°†ä¸€ä¸ªæ•°ç»„åˆ†æˆå¤šä¸ªã€‚

æˆ‘ä»¬`array_split()`ç”¨äºæ‹†åˆ†æ•°ç»„ï¼Œæˆ‘ä»¬å°†è¦æ‹†åˆ†çš„æ•°ç»„å’Œæ‹†åˆ†çš„æ•°é‡ä¼ é€’ç»™å®ƒã€‚

```py
In [6]: import numpy as np
   ...:
   ...: arr = np.array([1, 2, 3, 4, 5, 6])
   ...:
   ...: newarr = np.array_split(arr, 3)
   ...:
   ...: print(newarr)
[array([1, 2]), array([3, 4]), array([5, 6])]
```



## æœç´¢æ•°ç»„

æ‚¨å¯ä»¥åœ¨æ•°ç»„ä¸­æœç´¢æŸä¸ªå€¼ï¼Œå¹¶è¿”å›åŒ¹é…çš„ç´¢å¼•ã€‚

è¦æœç´¢æ•°ç»„ï¼Œè¯·ä½¿ç”¨`where()`æ–¹æ³•ã€‚

æŸ¥æ‰¾å€¼ä¸º 4 çš„ç´¢å¼•ï¼š

```py
In [7]: import numpy as np
   ...:
   ...: arr = np.array([1, 2, 3, 4, 5, 4, 4])
   ...:
   ...: x = np.where(arr == 4)
   ...:
   ...: print(x) # returns 2
(array([3, 5, 6], dtype=int64),)
```

**æŸ¥æ‰¾å€¼æ˜¯å¶æ•°çš„ç´¢å¼•ï¼š**

```py
x = np.where(arr%2 == 0)
```



**æŸ¥æ‰¾å€¼æ˜¯å¥‡æ•°çš„ç´¢å¼•ï¼š**

```py
x = np.where(arr%2 == 1)
```



## æ•°ç»„æ’åº

> â— æ­¤æ–¹æ³•è¿”å›æ•°ç»„çš„å‰¯æœ¬ï¼Œä¿æŒåŸå§‹æ•°ç»„ä¸å˜ã€‚æ‰€ä»¥ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡æ¥æ¥æ”¶

```python
In [9]: np.sort(arr)
Out[9]: array([1, 2, 3, 4, 4, 4, 5])
```

**æ’åºä¸ä»…ä»…èƒ½æ’åˆ—æ•°å­—ï¼Œè¿˜èƒ½æ’åˆ—å­—æ¯**

```python
In [11]: arr = np.array([1, 43,2,1,2,4,54,-1,-5,-534,'a','g','h','s','a','e','g','cds','df','vd','sa','sd'])

In [12]: np.sort(arr)
Out[12]:
array(['-1', '-5', '-534', '1', '1', '2', '2', '4', '43', '54', 'a', 'a',
       'cds', 'df', 'e', 'g', 'g', 'h', 's', 'sa', 'sd', 'vd'],
      dtype='<U11')
```



## æ•°ç»„è¿‡æ»¤å™¨

åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨æ•°ç»„ï¼Œå®ƒåªè¿”å›åŸå§‹æ•°ç»„ä¸­çš„å¶æ•°å…ƒç´ ï¼š

```python
import numpy as np

arr = np.array([1, 2, 3, 4, 5, 6, 7])

# Create an empty list
filter_arr = []

# go through each element in arr
for element in arr:
  # if the element is completely divisble by 2, set the value to True, otherwise False
  if element % 2 == 0:
    filter_arr.append(True)
  else:
    filter_arr.append(False)

newarr = arr[filter_arr]

print(filter_arr)
print(newarr)
```



## éšå³æ•°

åœ¨ NumPy ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°ç»„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸Šè¿°ç¤ºä¾‹ä¸­çš„ä¸¤ç§æ–¹æ³•æ¥åˆ¶ä½œéšæœºæ•°ç»„ã€‚

è¯¥`randint()`æ–¹æ³•é‡‡ç”¨ä¸€ä¸ª`size` å‚æ•°ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šæ•°ç»„çš„å½¢çŠ¶ã€‚

ç”Ÿæˆä¸€ä¸ªåŒ…å« 5 ä¸ªä» 0 åˆ° 100 çš„éšæœºæ•´æ•°çš„ä¸€ç»´æ•°ç»„ï¼š

```python
from numpy import random
x=random.randint(100, size=(5))
print(x)
```





## END é“¾æ¥

<ul><li><div><a href = '18.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '20.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

