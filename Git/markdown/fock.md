# ä¿æŒè‡ªå·±githubçš„forksè‡ªåŠ¨å’Œä¸Šæ¸¸ä»“åº“åŒæ­¥å¹¶æ¨é€åˆ° gitee

[toc]

## âš¡å‰è¨€

æˆ‘ä»¬éƒ½æ˜¯è¿™ä¸ªä»“åº“æœªæ¥å¾ˆæœ‰æ½œåŠ›çš„å®¢æˆ·ï¼Œæˆ–è€…æ˜¯è´¡çŒ®è€…ï¼Œè°¢è°¢ä½ é€‰æ‹©äº†åŠ å…¥`C-UB`ç¤¾åŒºï¼Œæˆ‘ä»¬å°†ä¼šä¸€èµ·åˆä½œï¼Œæœªæ¥æˆ‘ä»¬å°†ä¼šè€ƒè™‘ä»¥åŒºå—é“¾ä¸ºåº•å±‚æ­å»ºä¸€ä¸ªå…¨æ°‘å­¦ä¹ å¹³å°ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªäººéƒ½å°†ä¼šæ˜¯è¿™ä¸ªç¤¾åŒºçš„æ„å»ºç€ï¼Œå°†ä¼šæ¨åŠ¨[c-universal blockchainï¼ˆé“¾å­¦ï¼‰](https://github.com/c-ub) ç¤¾åŒºçš„å‘å±•å’Œè¿›æ­¥~

> æˆ–è®¸æˆ‘ä»¬ä¼šå¾ˆç–‘æƒ‘ï¼Ÿ
>
> åœ¨æˆ‘ä»¬å‚ä¸è´¡çŒ®çš„æ—¶å€™ï¼Œå¦‚æœå…‹éš†äº†**[ğŸ§· cs-awesome-Block_Chain](https://github.com/3293172751/cs-awesome-Block_Chain)é¡¹ç›®ï¼Œä½†æ˜¯æ¯æ¬¡è·å–ä¸Šæ¸¸ä»£ç å¾ˆéº»çƒ¦æ€ä¹ˆåŠï¼Ÿä»Šå¤©å°†ä¼šè§£å†³è¿™ä¸ªéº»çƒ¦â¬‡ï¸ **



## âš¡è‡ªåŠ¨æ‹‰å– fork æºä¸Šæ¸¸

### æ–¹æ³•ä¸€ï¼šapps pull

ğŸ“¢ï¼šåªè¦ä½ ä¸æ”¹fork åº“çš„å†…å®¹ï¼Œé‚£ä¹ˆæ˜¯çº¯å‡€åŒæ­¥æ¨¡å¼ï¼Œæ—¶é—´ç‚¹éƒ½å’Œä¸Šæ¸¸ä»“åº“ä¸€è‡´ã€‚åŒæ­¥æ›´æ–°æ—¶é—´ 3 ä¸ªå°æ—¶ä»¥ä¸Šã€‚

#### å®‰è£… github app

[ğŸ§· è®¿é—®åœ°å€ï¼šhttps://github.com/apps/pull](https://github.com/apps/pull)

[ğŸ§· å¼€æºåœ°å€ï¼šhttps://github.com/wei/pull#readme](https://github.com/wei/pull#readme)

ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Šï¼š

![image-20221015194311152](http://sm.nsddd.top/smimage-20221015194311152.png?xxw@nsddd.top)

âš ï¸ å®‰è£…æˆåŠŸï¼š

![image-20221015194613047](http://sm.nsddd.top/smimage-20221015194613047.png?xxw@nsddd.top)



#### æ‰“å¼€pull app

![image-20221015194905209](http://sm.nsddd.top/smimage-20221015194905209.png?xxw@nsddd.top)



#### é€‰æ‹©è‡ªå·±éœ€è¦çš„ä»“åº“æˆ–è€…æ‰€æœ‰çš„ä»“åº“

![image-20221015195024104](http://sm.nsddd.top/smimage-20221015195024104.png?xxw@nsddd.top)

**ğŸ“® æœ€åï¼š**

ä¸Šæ¸¸ä»“åº“æ”¹å˜ï¼Œè¿‡äº†å‡ ä¸ªå°æ—¶åï¼Œè‡ªåŠ¨åŒæ­¥æˆåŠŸ



#### é«˜çº§è®¾ç½®ï¼ˆå¸¦é…ç½®ï¼‰

ğŸ˜ åŒæ—¶ä¹Ÿæ”¯æŒä¿®æ”¹åŒæ­¥çš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯ä¸‰ä¸ªå°æ—¶~

æ‹‰åº”ç”¨ç¨‹åºå°†æ¯éš”å‡ ä¸ªå°æ—¶ä½¿ç”¨**ç¡¬é‡ç½®**è‡ªåŠ¨ç›‘è§†å¹¶å°†ä¸Šæ¸¸çš„é»˜è®¤ï¼ˆä¸»ï¼‰åˆ†æ”¯æ‹‰å…¥æ‚¨çš„åˆ†æ”¯ã€‚æ‚¨ä¹Ÿå¯ä»¥éšæ—¶æ‰‹åŠ¨[è§¦å‘](https://github.com/wei/pull#trigger-manually)å®ƒã€‚

1. åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚

2. åœ¨å­˜å‚¨åº“è®¾ç½® > åˆ†æ”¯ä¸‹å°†æ–°åˆ†æ”¯è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ã€‚

3. æ·»åŠ `.github/pull.yml`åˆ°æ‚¨çš„é»˜è®¤åˆ†æ”¯ã€‚

   **æœ€å¸¸è§çš„ï¼š**

   ï¼ˆè¡Œä¸ºä¸åŸºæœ¬è®¾ç½®ç›¸åŒï¼‰

   ```
   version: "1"
   rules:
     - base: master
       upstream: wei:master    # change `wei` to the owner of upstream repo
       mergeMethod: hardreset
   ```

   **é«˜çº§ç”¨æ³•ï¼š**

   ```bash
   version: "1"
   rules:                      # Array of rules
     - base: master            # Required. Target branch
       upstream: wei:master    # Required. Must be in the same fork network.
       mergeMethod: hardreset  # Optional, one of [none, merge, squash, rebase, hardreset], Default: none.
       mergeUnstable: false    # Optional, merge pull request even when the mergeable_state is not clean. Default: false
     - base: dev
       upstream: master        # Required. Can be a branch in the same forked repo.
       assignees:              # Optional
         - wei
       reviewers:              # Optional
         - wei
       conflictReviewers:      # Optional, on merge conflict assign a reviewer
         - wei
   label: ":arrow_heading_down: pull"  # Optional
   conflictLabel: "merge-conflict"     # Optional, on merge conflict assign a custom label, Default: merge-conflict
   ```

4. è½¬åˆ°`https://pull.git.ci/check/${owner}/${repo}`éªŒè¯æ‚¨çš„`.github/pull.yml`ï¼ˆä»…é™å…¬å…±å›è´­ï¼‰ã€‚æœ‰å…³éªŒè¯å®ƒçš„å¦ä¸€ç§æ–¹æ³•ï¼Œè¯·å‚è§[#234](https://github.com/wei/pull/issues/234)ã€‚

5. å®‰è£…[æ‹‰å–åº”ç”¨ç¨‹åº](https://github.com/apps/pull)ã€‚



### æ–¹æ³•äºŒï¼šgithub ActionsğŸ”¥

ğŸ“® Actionsæ˜¯ä¸€ä¸ªè®©æˆ‘åˆ†æ²‰è¿·å…¶ä¸­çš„åŠŸèƒ½ï¼Œå¤§æ¦‚ä½“éªŒè¿‡å°±çŸ¥é“å®ƒæœ‰å¤šå¿«ä¹~

+ [æ•™ç¨‹åœ¨è¿™é‡Œ](http://nsddd.top/actions)

| åˆ—è¡¨                                                         | github å•†åº—                                          |      |
| ------------------------------------------------------------ | ---------------------------------------------------- | ---- |
| [Fork Sync](https://github.com/tgymnich/fork-sync)           | https://github.com/marketplace/actions/fork-sync     |      |
| [Github Action: Upstream Sync](https://github.com/aormsby/Fork-Sync-With-Upstream-action) | https://github.com/marketplace/actions/upstream-sync |      |

#### Fork Sync

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

![image-20221015200420934](http://sm.nsddd.top/smimage-20221015200420934.png?xxw@nsddd.top)

è‡ªç”¨é…ç½®ï¼š

```yaml
# .github/workflows/sync.yml
name: Sync Fork

on:
  push: # push æ—¶è§¦å‘, ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯•é…ç½®æœ‰æ²¡æœ‰é—®é¢˜
  schedule:
    - cron: '* */3 * * *' # æ¯3å°æ—¶è§¦å‘, å¯¹äºä¸€äº›æ›´æ–°ä¸é‚£ä¹ˆé¢‘ç¹çš„é¡¹ç›®å¯ä»¥è®¾ç½®ä¸ºæ¯å¤©ä¸€æ¬¡, ä½ç¢³ä¸€ç‚¹
jobs:
  repo-sync:
    runs-on: ubuntu-latest
    steps:
      - uses: TG908/fork-sync@v1.6.3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          owner: c-ub # fork çš„ä¸Šæ¸¸ä»“åº“ user
          head: master # fork çš„ä¸Šæ¸¸ä»“åº“ branch
          base: master # æœ¬åœ°ä»“åº“ branch
```

**å‚æ•°è¯¦è§£ï¼š**

| name         | Optional | Default             | description            |
| ------------ | -------- | ------------------- | ---------------------- |
| owner        | âœ…        | $current_repo_owner | åˆ†å‰å­˜å‚¨åº“çš„æ‰€æœ‰è€…     |
| token        | âœ…        | ${{ github.token }} | è®¿é—® Github API çš„ä»¤ç‰Œ |
| head         | âœ…        | master              | fork çš„ä¸Šæ¸¸ä»“åº“ branch |
| base         | âœ…        | master              | æœ¬åœ°ä»“åº“ branch        |
| merge_method | âœ…        | merge               | åˆå¹¶ã€å˜åŸºæˆ–å‹ç¼©       |
| pr_title     | âœ…        | Fork Sync           | åˆ›å»ºçš„æ‹‰å–è¯·æ±‚çš„æ ‡é¢˜   |
| pr_message   | âœ…        |                     | åˆ›å»ºçš„æ‹‰å–è¯·æ±‚çš„æ¶ˆæ¯   |
| ignore_fail  | âœ…        |                     | Iå¿½ç•¥å¼‚å¸¸              |

âš ï¸$current_repo_owner æ˜¯æ‚¨è‡ªå·±çš„ç”¨æˆ·åï¼

âš ï¸ä»…æä¾› å’Œ çš„åˆ†æ”¯`head`åç§°`base`ã€‚`user:branch`ä¸ç®¡ç”¨ï¼

âš ï¸ å¦‚æœ`auto_approve`è®¾ç½®ä¸º`true`æ‚¨å¿…é¡»åœ¨é»˜è®¤ github ä»¤ç‰Œä¸­æä¾›ä¸ªäººè®¿é—®ä»¤ç‰Œ`token`å°†ä¸èµ·ä½œç”¨ï¼





## âš¡æ‰‹åŠ¨æ‹‰å– fork æºä¸Šæ¸¸

### æƒ…å†µä¸€ï¼šä»£ç ä¸å†²çª

#### æ–¹æ³•ä¸€ï¼šFetch upstream

ğŸ“¢ï¼šåŒæ­¥æ˜¯å¹²å‡€çš„ï¼Œå®Œå…¨åŒæ­¥

![image-20221015203227894](http://sm.nsddd.top/smimage-20221015203227894.png?xxw@nsddd.top)



#### æ–¹æ³•äºŒï¼šPull requests

> **è¯¥æ–¹æ³•ä¼šå¯¼è‡´ commit è®°å½•æ¯” fork çš„æºå¤šï¼Œå¦‚æœä½ è¦ä¿æŒè¯¥ä»“åº“çš„å¹²å‡€æ•´æ´ï¼Œè¿™ç§ merge pull requests çš„æƒ…å†µå°±ä¸åˆé€‚äº†ã€‚**

![image-20221015203831326](http://sm.nsddd.top/smimage-20221015203831326.png?xxw@nsddd.top)



#### æ–¹æ³•ä¸‰ï¼šå‘½ä»¤è¡ŒåŒæ­¥å¤åˆ¶

[å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.github.com/cn/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork](https://docs.github.com/cn/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork)

æŒ‡å®šfork çš„ä¸Šæ¸¸ä»“åº“ï¼ˆupstreamç±»ä¼¼äºç»„ç»‡åç§°ï¼Œéšä¾¿å–ï¼‰ï¼š

```bash
git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git
```



éªŒè¯ï¼š

```bash
git remote -v
```



ä¸Šæ¸¸è·å–æäº¤æ•°æ®ï¼š

```bash
git fetch upstream
```



æ£€å‡º fork çš„æœ¬åœ°é»˜è®¤åˆ†æ”¯ï¼Œè¿™é‡Œç”¨ main æµ‹è¯•ï¼š

```bash
git checkout main
```



å°†ä¸Šæ¸¸é»˜è®¤åˆ†æ”¯ï¼Œæœ¬ä¾‹ä¸­ä¸º upstream/main çš„æ›´æ”¹åˆå¹¶åˆ°æœ¬åœ°é»˜è®¤åˆ†æ”¯ï¼Œè®°å¾—è¦æŒ‰ q é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œä¸ä¼šå°±ç›´æ¥å…³é—­å½“å‰å‘½ä»¤è¡Œåœ¨è¿›å…¥ï¼š

```bash
git merge upstream/main
```



æ¨é€åˆ° githubï¼š

```bash
git push origin main
```



## âš¡è‡ªåŠ¨æ¨é€åˆ° gitee

### github Actions æ–¹æ³•

| æ¨èåˆ—è¡¨                                                     | github å•†åº—                                                  |      |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- |
| [Hub Mirror Action](https://github.com/Yikun/hub-mirror-action) | https://github.com/marketplace/actions/hub-mirror-action     |      |
| [repository-mirroring-action](https://github.com/marketplace/actions/mirroring-repository) | https://github.com/pixta-dev/repository-mirroring-action     |      |
| [Git Mirror Action](https://github.com/wearerequired/git-mirror-action) | https://github.com/marketplace/actions/mirror-a-repository-using-ssh |      |
| [mirror-action](https://github.com/yesolutions/mirror-action) | https://github.com/marketplace/actions/mirror-repository     |      |
| [Mirror to GitLab and trigger GitLab CI](https://github.com/SvanBoxel/gitlab-mirror-and-ci-action) | https://github.com/marketplace/actions/mirror-to-gitlab-and-run-gitlab-ci#mirror-to-gitlab-and-trigger-gitlab-ci |      |



### Hub Mirror Action

#### å‚è€ƒåˆ—è¡¨

+ [Hub Mirror Action](https://github.com/Yikun/hub-mirror-action) ï¼šgithub æºç åº“
+ [Sync GitHub to other hub](https://github.com/yi-Xu-0100/hub-mirror) ï¼šä¸€ä¸ªç”¨äºå±•ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªactionçš„æ¨¡æ¿ä»“åº“
+ [è‡ªåŠ¨é•œåƒ GitHub ä»“åº“åˆ° Gitee](https://github.com/ShixiangWang/sync2gitee)ï¼šä¸€ä¸ªå…³äºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªactionçš„ä»‹ç»
+ [å·§ç”¨Github ActionåŒæ­¥ä»£ç åˆ°Gitee](https://yikun.github.io/2020/01/17/å·§ç”¨Github-ActionåŒæ­¥ä»£ç åˆ°Gitee/): Github Actionç¬¬ä¸€ç¯‡è½¯æ–‡

#### è¿‡ç¨‹

1. ä¸€å¼€å§‹åœ¨ github å•†åº—æ‰¾ actions æ–¹æ³•ï¼Œè¿˜æ˜¯æ‰“ç®—ç›´æ¥é€šè¿‡é›†æˆå®ç°ï¼Œå› ä¸º gitee å…è´¹ç‰ˆä¸å…·å¤‡ç›¸å…³è‡ªåŠ¨åŒ–çš„åŠŸèƒ½ã€‚

https://github.com/marketplace?type=actions&query=gitee+

ç„¶åå‘ç°ï¼Œstars æ•°æœ€é«˜çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå‚è€ƒä¸‹ï¼Œå¯ä»¥æ”¯æŒå¤š repo ä»“åº“ï¼Œé‚£ä¹ˆå¯ä»¥å•ç‹¬æ‹†å¼€ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªç»Ÿä¸€çš„æ¨é€ä»“åº“æ¥é…ç½®ï¼Œéå¸¸ä¸é”™

![image-20221015212612986](http://sm.nsddd.top/smimage-20221015212612986.png?xxw@nsddd.top)



**ä»£ç æ ¸å¿ƒæµç¨‹ï¼š**

![image-20221015215703305](http://sm.nsddd.top/smimage-20221015215703305.png?xxw@nsddd.top)



è¦æ³¨æ„çš„åœ°æ–¹ï¼š on.push.branches æˆ–è€… on.pull_request.branches ä¸ç®¡æ˜¯å“ªä¸ªä»“åº“ï¼Œç”±äº github ä¸Šé¢æ—§çš„ä»“åº“è¿˜æ˜¯ master è€Œä¸æ˜¯ mainï¼Œæ‰€ä»¥ä½ è¦æ”¹æˆå¯¹åº”çš„

```yaml
name: Gitee repos mirror periodic job

on:
  push: # æœ‰ push ä»£ç çš„æ—¶å€™ä¼šæ‰§è¡Œ
    branches: [ main ]
  pull_request: # æœ‰ pull_request ä»£ç çš„æ—¶å€™ä¼šæ‰§è¡Œ
    branches: [ main ]
  schedule: 
    # æ¯3ä¸ªå°æ—¶è·‘ä¸€æ¬¡
    - cron:  '0 */3 * * *'

jobs:
  build:

    runs-on: ubuntu-latest

    steps:

    - name: Mirror the Github organization repos to Gitee.
      uses: Yikun/hub-mirror-action@v1.0
      with:
        src: github/ZhaoUncle	# å¿…é€‰ï¼Œéœ€è¦åŒæ­¥çš„Githubç”¨æˆ·ï¼ˆæºï¼‰
        dst: gitee/qingfeng689 # å¿…é€‰ï¼Œéœ€è¦åŒæ­¥åˆ°çš„Giteeçš„ç”¨æˆ·ï¼ˆç›®çš„ï¼‰
        dst_key: ${{ secrets.GITEE_PRIVATE_KEY }} # å¿…é€‰ï¼ŒGiteeå…¬é’¥å¯¹åº”çš„ç§é’¥ï¼Œhttps://gitee.com/profile/sshkeys
        dst_token:  ${{ secrets.GITEE_TOKEN }} # å¿…é€‰ï¼ŒGiteeå¯¹åº”çš„ç”¨äºåˆ›å»ºä»“åº“çš„tokenï¼Œhttps://gitee.com/profile/personal_access_tokens
        account_type: user # å¦‚æœæ˜¯ç»„ç»‡ï¼ŒæŒ‡å®šç»„ç»‡å³å¯ï¼Œé»˜è®¤ä¸ºç”¨æˆ·user
        timeout: 600 # git å‘½ä»¤è¶…æ—¶æ—¶é—´
        debug: true # æµ‹è¯•ç”¨ï¼Œæ­£å¸¸å¯ä»¥å…³æ‰
        force_update: true # å¼ºåˆ¶æ¨é€åˆ° dst ä»“åº“
        white_list: "test2,community.applications" # ç™½åå•æœºåˆ¶ï¼Œå¯ä»¥ç”¨äºæ›´æ–°æŸäº›æŒ‡å®šåº“
```



#### å‚è€ƒä¸€ï¼š

https://github.com/marketplace/actions/hub-mirror-action

![202201241316027](http://sm.nsddd.top/sm202201241316027.png?xxw@nsddd.top)

#### å‚è€ƒäºŒ

https://github.com/yi-Xu-0100/hub-mirror

ç”¨åˆ°çš„åœ°å€ï¼š

+ github ssh key é…ç½®åœ°å€ï¼šhttps://github.com/settings/keys
+ gitee ssh key é…ç½®åœ°å€ï¼šhttps://gitee.com/profile/sshkeys
+ github toekn é…ç½®åœ°å€ï¼šhttps://github.com/settings/tokens
+ gitee token é…ç½®åœ°å€ï¼šhttps://gitee.com/profile/personal_access_tokens

![img](http://sm.nsddd.top/sm202201241317019.png?xxw@nsddd.top)

### æƒ³ç®€å•ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼

fork è¯¥ä»“åº“åˆ°ä½ æœ¬åœ°ï¼Œç„¶åä¿®æ”¹ ç›¸å…³å‚æ•°å°±å¥½äº†ï¼Œæˆªå›¾å¦‚ä¸‹

![202201241334323](http://sm.nsddd.top/sm202201241334323.png?xxw@nsddd.top)



## âš¡é“¾æ¥

**æ¨èé˜…è¯»ï¼š**

[Githubè¿›è¡Œforkåå¦‚ä½•ä¸åŸä»“åº“åŒæ­¥ï¼šé‡æ–°forkå¾ˆçœäº‹ï¼Œä½†ä¸å¦‚åå¤ç»ƒä¹ ç‰ˆæœ¬åˆå¹¶](https://github.com/selfteaching/the-craft-of-selfteaching/issues/67)



