# git标签

[toc]

## Git Tags

相信通过前面课程的学习你已经发现了：分支很容易被人为移动，并且当有新的提交时，它也会移动。分支很容易被改变，大部分分支还只是临时的，并且还一直在变。

你可能会问了：有没有什么可以*永远*指向某个提交记录的标识呢，比如软件发布新的大版本，或者是修正一些重要的 Bug 或是增加了某些新特性，有没有比分支更好的可以永远指向这些提交的方法呢？

当然有了！Git 的 tag 就是干这个用的啊，它们可以（在某种程度上 —— 因为标签可以被删除后重新在另外一个位置创建同名的标签）永久地将某个特定的提交命名为里程碑，然后就可以像分支一样引用了。

更难得的是，它们并不会随着新的提交而移动。你也不能切换到某个标签上面进行修改提交，它就像是提交树上的一个锚点，标识了某个特定的位置。

咱们来看看标签到底是什么样。



### 建立标签

咱们先建立一个标签，指向提交记录 `C1`，表示这是我们 1.0 版本。

```
git tag v1 C1
```

<img src="https://sm.nsddd.top//typora/image-20220912163632070.png?mail:3293172751@qq.com" alt="image-20220912163632070" style="zoom:33%;" />

很容易吧！我们将这个标签命名为 `v1`，并且明确地让它指向提交记录 `C1`，**如果你不指定提交记录，Git 会用 `HEAD` 所指向的位置。（就是当前c2)**



### 案例

按照目标建立两个标签，然后切换到 `v1` 上面，要注意你会进到分离 `HEAD` 的状态 —— 这是因为不能直接在`v1` 上面做 commit。



## Git Describe

由于标签在代码库中起着“锚点”的作用，Git 还为此专门设计了一个命令用来**描述**离你最近的锚点（也就是标签），它就是 `git describe`！

Git Describe 能帮你在提交历史中移动了多次以后找到方向；当你用 `git bisect`（一个查找产生 Bug 的提交记录的指令）找到某个提交记录时，或者是当你坐在你那刚刚度假回来的同事的电脑前时， 可能会用到这个命令。

`git describe` 的语法是：

```
git describe <ref>
```

`<ref>` 可以是任何能被 Git 识别成提交记录的引用，如果你没有指定的话，Git 会以你目前所检出的位置（`HEAD`）。

它输出的结果是这样的：

```
<tag>_<numCommits>_g<hash>
```

`tag` 表示的是离 `ref` 最近的标签， `numCommits` 是表示这个 `ref` 与 `tag` 相差有多少个提交记录， `hash` 表示的是你所给定的 `ref` 所表示的提交记录哈希值的前几位。

当 `ref` 提交记录上有某个标签时，则只输出标签名称



**我们使用tag给c3加入标签，记住我们现在在main**

```
git tag v2 c3
```

<img src="https://sm.nsddd.top//typora/image-20220912164344640.png?mail:3293172751@qq.com" alt="image-20220912164344640" style="zoom: 33%;" />

**此时看到上面的图，我们进行下面的操作**

`git describe main` 会输出：

```
v1_2_gC2
```

`git describe side` 会输出：

```
v2_1_gC4
```